!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define("neaterJS",[],n):"object"==typeof exports?exports.neaterJS=n():t.neaterJS=n()}("undefined"!=typeof self?self:this,function(){return function(t){var n={};function e(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,e),o.l=!0,o.exports}return e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:i})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(e.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)e.d(i,o,function(n){return t[n]}.bind(null,o));return i},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=6)}([function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.CONFIG=void 0;n.CONFIG={C1:1,C2:2,C3:4,COMPABILITY_THRESHOLD:3,PERCENTAGE_NEW_NODE:.03,PERCENTAGE_NEW_CONNECTION:.05,PERCENTAGE_MUTATION:.8,PERCENTAGE_MUTATION_ADJUST_WEIGHT:.9,STAGNATION_THRESHOLD:.05,ADJUST_WEIGHT_FACTOR:.2,NEW_WEIGHT_RANGE:1,ALLOW_LOOPS:!1}},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i,o=(i=e(2))&&i.__esModule?i:{default:i};function s(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var r=function(){function t(n,e,i,o){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.generation=n,this.numInputs=e,this.numOutputs=i,this.activation=o,this.fitness=u,this.species=r,this.brain=s}var n,e,i;return n=t,(e=[{key:"initialize",value:function(){this.brain=new o.default(this.numInputs,this.numOutputs,this.activation),this.brain.initialize()}},{key:"see",value:function(t){this.brain.setInputs(t)}},{key:"think",value:function(){return this.brain.activateNetwork()}},{key:"setFitness",value:function(t){this.fitness=t}},{key:"clone",value:function(){return new t(this.generation,this.numInputs,this.numOutputs,this.activation,this.brain.clone(),this.species,this.fitness)}}])&&s(n.prototype,e),i&&s(n,i),t}();n.default=r,t.exports=n.default},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=c(e(8)),o=c(e(9)),s=c(e(10)),r=e(0),u=c(e(4)),a=e(3);function c(t){return t&&t.__esModule?t:{default:t}}function h(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var f=function(){function t(n,e,i){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.nodes=[],this.connections=[],this.numInputNodes=n,this.numOutputNodes=e,this.activation=i}var n,e,c;return n=t,(e=[{key:"initialize",value:function(){this.nodes.push(new o.default(0,i.default.BIAS,1));for(var t=0;t<this.numInputNodes;t++)this.nodes.push(new o.default(1+t,i.default.INPUT));for(var n=0;n<this.numOutputNodes;n++)this.nodes.push(new o.default(1+this.numInputNodes+n,i.default.OUTPUT));for(var e=this.getInputNodes(),c=this.getOutputNodes(),h=0;h<c.length;h++){var f=(0,a.randomDoubleFromInterval)(r.CONFIG.NEW_WEIGHT_RANGE,-r.CONFIG.NEW_WEIGHT_RANGE);this.connections.push(new s.default(0,h+this.numInputNodes+1,f,!0,u.default.getNextInnovationNumber(0,1+this.numInputNodes+h)))}for(var l=0;l<e.length;l++)for(var d=0;d<c.length;d++){var p=(0,a.randomDoubleFromInterval)(r.CONFIG.NEW_WEIGHT_RANGE,-r.CONFIG.NEW_WEIGHT_RANGE);this.connections.push(new s.default(l+1,d+this.numInputNodes+1,p,!0,u.default.getNextInnovationNumber(1+l,1+this.numInputNodes+d)))}}},{key:"getBiasNode",value:function(){return this.nodes[0]}},{key:"getInputNodes",value:function(){return this.nodes.slice(1,1+this.numInputNodes)}},{key:"getOutputNodes",value:function(){return this.nodes.slice(1+this.numInputNodes,1+this.numInputNodes+this.numOutputNodes)}},{key:"getHiddenNodes",value:function(){return this.nodes.slice(1+this.numInputNodes+this.numOutputNodes)}},{key:"addNode",value:function(){var t=this.connections[Math.floor(Math.random()*this.connections.length)];t.enabled=!1;var n=new o.default(u.default.getNextNodeId(t),i.default.HIDDEN);this.nodes.push(n),this.connections.push(new s.default(t.start,n.id,1,!0,u.default.getNextInnovationNumber(t.start,n.id))),this.connections.push(new s.default(n.id,t.end,t.weight,!0,u.default.getNextInnovationNumber(n.id,t.end)))}},{key:"addConnection",value:function(){if(!(this.getHiddenNodes().length<1)){for(var t,n,e=0,i=!1,o=this.getHiddenNodes().concat(this.getOutputNodes());!i;){if(t=this.nodes[Math.floor(Math.random()*this.nodes.length)],n=o[Math.floor(Math.random()*o.length)],i=!this.alreadyConnected(t,n),!r.CONFIG.ALLOW_LOOPS&&(i=i&&!this.sameNode(t,n))){var c=new s.default(t.id,n.id,1,!0,-1);i=!!this.sortNodes(c)}if(++e>50)return}var h=(0,a.randomDoubleFromInterval)(r.CONFIG.NEW_WEIGHT_RANGE,-r.CONFIG.NEW_WEIGHT_RANGE);this.connections.push(new s.default(t.id,n.id,h,!0,u.default.getNextInnovationNumber(t.id,n.id)))}}},{key:"isFullyConnected",value:function(){var t=this.getHiddenNodes().length,n=0;r.CONFIG.ALLOW_LOOPS?n=this.numInputNodes*(t+this.numOutputNodes)+t*(t+this.numOutputNodes)+(t+this.numOutputNodes)+this.numOutputNodes*(t+this.numOutputNodes):n=this.numInputNodes*(t+this.numOutputNodes)+t*(t-1+this.numOutputNodes)+(t+this.numOutputNodes);return n===this.connections.length}},{key:"alreadyConnected",value:function(t,n){for(var e=0;e<this.connections.length;e++)if(this.connections[e].start===t.id&&this.connections[e].end===n.id)return!0;return!1}},{key:"sameNode",value:function(t,n){return!r.CONFIG.ALLOW_LOOPS&&t.id===n.id}},{key:"resetNetwork",value:function(){for(var t=1;t<=this.nodes;t++)this.nodes[t].outputValue=0}},{key:"setInputs",value:function(t){for(var n=1;n<=this.numInputNodes;n++)this.nodes[n].outputValue=t[n-1]}},{key:"activateNetwork",value:function(){if(r.CONFIG.ALLOW_LOOPS){for(var t=this.getHiddenNodes(),n=0;n<t.length;n++)this.activateNode(t[n]);for(var e=this.getOutputNodes(),i=0;i<e.length;i++)this.activateNode(e[i])}else for(var o=this.sortNodes(),s=1+this.numInputNodes;s<o.length;s++)this.activateNode(o[s]);return this.getOutputNodes().map(function(t){return t.outputValue})}},{key:"activateNode",value:function(t){for(var n=this,e=this.connections.filter(function(n){return n.end===t.id}),i=0,o=function(t){if(!e[t].enabled)return"continue";var o=n.nodes.find(function(n){return n.id===e[t].start});i+=o.outputValue*e[t].weight},s=0;s<e.length;s++)o(s);t.outputValue=this.activation(i)}},{key:"sortNodes",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=[],e=[this.getBiasNode()].concat(this.getInputNodes()),i=this.getHiddenNodes().concat(this.getOutputNodes()),o=JSON.parse(JSON.stringify(this.connections.filter(function(t){return t.enabled})));t&&o.push(t);for(var s=function(){var t=e.splice(0,1)[0];n.push(t),o=o.filter(function(n){return n.start!==t.id});for(var s=function(t){o.some(function(n){return n.end===i[t].id})||e.push(i.splice(t,1)[0])},r=0;r<i.length;r++)s(r)};e.length>0;)s();return!(o.length>0)&&n}},{key:"clone",value:function(){for(var n=new t(this.numInputNodes,this.numOutputNodes,this.activation),e=0;e<this.nodes.length;e++)n.nodes.push(this.nodes[e].clone());for(var i=0;i<this.connections.length;i++)n.connections.push(this.connections[i].clone());return n}}])&&h(n.prototype,e),c&&h(n,c),t}();n.default=f,t.exports=n.default},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.randomDoubleFromInterval=function(t,n){return Math.random()*(t-n)+n}},function(t,n,e){"use strict";function i(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=new(function(){function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.connectionCounter=-1,this.connectionDict=[],this.nodeCounter=-1,this.nodeDict=[]}var n,e,o;return n=t,(e=[{key:"getNextNodeId",value:function(t){return this.nodeDict.some(function(n){return n.start===t.start&&n.end===t.end})?this.nodeDict.find(function(n){return n.start===t.start&&n.end===t.end}).nodeId:(this.nodeCounter++,this.nodeDict.push({start:t.start,end:t.end,nodeId:this.nodeCounter}),this.nodeCounter)}},{key:"getNextInnovationNumber",value:function(t,n){return this.connectionDict.some(function(e){return e.start===t&&e.end===n})?this.connectionDict.find(function(e){return e.start===t&&e.end===n}).innovation:(this.connectionCounter++,this.connectionDict.push({start:t,end:n,innovation:this.connectionCounter}),this.connectionCounter)}}])&&i(n.prototype,e),o&&i(n,o),t}());n.default=o,t.exports=n.default},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.sigmoid=function(t){return 1/(1+Math.pow(Math.E,-4.9*t))},n.tanh=function(t){return Math.tanh(t)},n.binaryStep=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5;return t<n?0:1}},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.init=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,n=arguments[1],e=arguments[2],i=new o.default(t,n,e);return i.initialize(),i},Object.defineProperty(n,"CONFIG",{enumerable:!0,get:function(){return r.CONFIG}}),n.Activations=void 0;var i,o=(i=e(7))&&i.__esModule?i:{default:i},s=function(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,e):{};i.get||i.set?Object.defineProperty(n,e,i):n[e]=t[e]}return n.default=t,n}(e(5));n.Activations=s;var r=e(0)},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=u(e(1)),o=u(e(4)),s=u(e(11)),r=function(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,e):{};i.get||i.set?Object.defineProperty(n,e,i):n[e]=t[e]}return n.default=t,n}(e(5));function u(t){return t&&t.__esModule?t:{default:t}}function a(t){return function(t){if(Array.isArray(t)){for(var n=0,e=new Array(t.length);n<t.length;n++)e[n]=t[n];return e}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function c(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var h=function(){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,e=arguments[1],i=arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r.binaryStep;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.population=[],this.populationSize=n,this.numInputs=e,this.numOutputs=i,this.activation=o,this.generation=0,this.bestFitness=0,this.numStagnated=0,this.speciesDict={}}var n,e,u;return n=t,(e=[{key:"initialize",value:function(){o.default.nodeCounter=this.numInputs+this.numOutputs;for(var t=0;t<this.populationSize;t++){var n=new i.default(this.generation,this.numInputs,this.numOutputs,this.activation);n.initialize(),this.population.push(n)}this.speciesDict[0]=new s.default(0,this.population[0].clone())}},{key:"getNumberOfSpecies",value:function(){return[].concat(a(new Set(this.population.map(function(t){return t.species})))).length}},{key:"getOverallChampion",value:function(){return this.population.reduce(function(t,n){return t.fitness>n.fitness?t:n})}},{key:"repopulate",value:function(){var t=this;if(this.generation>0){var n=function(n){var e=t.speciesDict[n];e.dropOrganisms(),e.isStagnated()&&(t.population=t.population.filter(function(t){return t.species!==e.id}),delete t.speciesDict[n])};for(var e in this.speciesDict)n(e);var o=this.getOverallChampion();o.fitness>this.bestFitness?(this.bestFitness=o.fitness,this.numStagnated=0):this.numStagnated++}this.generation++;for(var r=0,u=this.population.length;r<u;r++){var c=!1;for(var e in this.speciesDict){var h=this.speciesDict[e];if(h.isCompatibleWith(this.population[r])){c=!0,h.assignToSpecies(this.population[r]);break}}if(!c){var f=Math.max.apply(Math,a(Object.keys(this.speciesDict).map(function(t){return+t})))+1;this.speciesDict[f]=new s.default(f,this.population[r].clone()),this.speciesDict[f].assignToSpecies(this.population[r])}}for(var l in this.speciesDict){this.speciesDict[l].organisms.length<1&&delete this.speciesDict[l]}for(var d=[].concat(a(new Set(this.population.map(function(t){return t.species})))),p=0,v=d.length;p<v;p++){var m=this.speciesDict[d[p]].organisms,g=m[Math.floor(Math.random()*m.length)].clone();this.speciesDict[d[p]].representative=g}var b=0;for(var O in this.speciesDict){var N=this.speciesDict[O];N.sortOrganisms(),N.cull(),N.adjustFitness(),N.calculateFitnessSum(),N.getChampion(),b+=N.fitnessSum}for(var y in this.speciesDict){var I=this.speciesDict[y];I.numOffsprings=Math.floor(I.fitnessSum/b*this.population.length),I.organisms.length<2?(I.numCloning=I.numOffsprings,I.numCrossover=0):(I.numCloning=Math.floor(.25*I.numOffsprings),I.numCrossover=I.numOffsprings-I.numCloning)}for(var _ in this.population=[],this.speciesDict){var C=this.speciesDict[_];C.numOffsprings>0&&(C.reproduce(),this.population=this.population.concat(C.offsprings))}if(this.population.length<this.populationSize){var w=new i.default(this.generation,this.numInputs,this.numOutputs,this.activation);w.initialize();var E=Math.max.apply(Math,a(Object.keys(this.speciesDict).map(function(t){return+t})))+1;for(this.speciesDict[E]=new s.default(E,w.clone()),this.speciesDict[E].assignToSpecies(w),this.population.push(w);this.population.length<this.populationSize;){var S=new i.default(this.generation,this.numInputs,this.numOutputs,this.activation);S.initialize(),this.speciesDict[E].assignToSpecies(S),this.population.push(S)}}return this.population}}])&&c(n.prototype,e),u&&c(n,u),t}();n.default=h,t.exports=n.default},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;n.default={BIAS:"bias",INPUT:"input",OUTPUT:"output",HIDDEN:"hidden"},t.exports=n.default},function(t,n,e){"use strict";function i(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=function(){function t(n,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=n,this.type=e,this.outputValue=i}var n,e,o;return n=t,(e=[{key:"clone",value:function(){return new t(this.id,this.type,this.outputValue)}}])&&i(n.prototype,e),o&&i(n,o),t}();n.default=o,t.exports=n.default},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=e(0),o=e(3);function s(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var r=function(){function t(n,e,i,o,s){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.start=n,this.end=e,this.weight=i,this.enabled=o,this.innovation=s}var n,e,r;return n=t,(e=[{key:"adjustWeight",value:function(){this.weight+=(0,o.randomDoubleFromInterval)(this.weight*i.CONFIG.ADJUST_WEIGHT_FACTOR,-this.weight*i.CONFIG.ADJUST_WEIGHT_FACTOR)}},{key:"reassignWeight",value:function(){this.weight=(0,o.randomDoubleFromInterval)(i.CONFIG.NEW_WEIGHT_RANGE,-i.CONFIG.NEW_WEIGHT_RANGE)}},{key:"clone",value:function(){return new t(this.start,this.end,this.weight,this.enabled,this.innovation)}}])&&s(n.prototype,e),r&&s(n,r),t}();n.default=r,t.exports=n.default},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=e(0),o=r(e(1)),s=r(e(2));function r(t){return t&&t.__esModule?t:{default:t}}function u(t){return function(t){if(Array.isArray(t)){for(var n=0,e=new Array(t.length);n<t.length;n++)e[n]=t[n];return e}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function a(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var c=function(){function t(n,e){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=n,this.representative=e,this.fitnessSum=0,this.organisms=[],this.numOffsprings=0,this.numCloning=0,this.numCrossover=0,this.offsprings=[],this.champion={},this.numStagnated=0}var n,e,r;return n=t,(e=[{key:"isStagnated",value:function(){return this.numStagnated>14}},{key:"dropOrganisms",value:function(){this.organisms=[],this.offsprings=[],this.fitnessSum=0,this.numOffsprings=0,this.numCloning=0,this.numCrossover=0}},{key:"assignToSpecies",value:function(t){t.species=this.id,this.organisms.push(t)}},{key:"adjustFitness",value:function(){for(var t=0,n=this.organisms.length;t<n;t++)this.organisms[t].fitness/=this.organisms.length}},{key:"calculateFitnessSum",value:function(){this.fitnessSum=0;for(var t=0,n=this.organisms.length;t<n;t++)this.fitnessSum+=this.organisms[t].fitness}},{key:"getChampion",value:function(){this.champion&&Math.abs(this.champion.fitness-this.organisms[0].fitness)<i.CONFIG.STAGNATION_THRESHOLD?this.numStagnated++:this.numStagnated=0,this.champion=this.organisms[0]}},{key:"isCompatibleWith",value:function(t){for(var n=this,e=0,o=0,s=0,r=0,a=this.representative.brain.connections[this.representative.brain.connections.length-1].innovation,c=t.brain.connections[t.brain.connections.length-1].innovation,h=[].concat(u(new Set([].concat(u(this.representative.brain.connections.map(function(t){return t.innovation})),u(t.brain.connections.map(function(t){return t.innovation})))))),f=function(i,u){n.representative.brain.connections.some(function(t){return t.innovation===h[i]})&&t.brain.connections.some(function(t){return t.innovation===h[i]})?(r+=Math.abs(n.representative.brain.connections.find(function(t){return t.innovation===h[i]}).weight-t.brain.connections.find(function(t){return t.innovation===h[i]}).weight),s++):n.representative.brain.connections.some(function(t){return t.innovation===h[i]})?h[i]<c?e++:o++:h[i]<a?e++:o++},l=0,d=h.length;l<d;l++)f(l);var p=s>0?r/s:0,v=Math.max(this.representative.brain.nodes.length+this.representative.brain.connections.length,t.brain.nodes.length+t.brain.connections.length);return i.CONFIG.C1*o/v+i.CONFIG.C2*e/v+i.CONFIG.C3*p<i.CONFIG.COMPABILITY_THRESHOLD}},{key:"sortOrganisms",value:function(){this.organisms.sort(function(t,n){return n.fitness-t.fitness})}},{key:"cull",value:function(){if(!(this.organisms.length<4)){this.calculateFitnessSum();for(var t=[],n=Math.floor(this.organisms.length/2);t.length<n;)for(var e=Math.random()*this.fitnessSum,i=0,o=0;o<this.organisms.length;o++)if((i+=this.organisms[o].fitness)>=e){var s=this.organisms.splice(o,1)[0];t.push(s),this.fitnessSum-=s.fitness;break}this.organisms=t}}},{key:"reproduce",value:function(){var t=this.champion.clone();t.generation+=1,this.offsprings.push(t),this.numCloning>0?this.numCloning--:this.numCrossover--;for(var n=0,e=this.numCloning;n<e;n++)for(var i=Math.random()*this.fitnessSum,o=0,s=0,r=this.organisms.length;s<r;s++)if((o+=this.organisms[s].fitness)>=i){var u=this.mutate(this.organisms[s]);u.generation++,this.offsprings.push(u);break}for(var a=0,c=this.numCrossover;a<c;a++){for(var h=Math.random()*this.fitnessSum,f=0,l=void 0,d=0,p=this.organisms.length;d<p;d++)if((f+=this.organisms[d].fitness)>=h){l=this.organisms[d];break}h=Math.random()*this.fitnessSum,f=0;var v=void 0;do{for(var m=0,g=this.organisms.length;m<g;m++)if((f+=this.organisms[m].fitness)>=h){v=this.organisms[m];break}h=Math.random()*this.fitnessSum,f=0}while(l===v);var b=this.mutate(this.crossover(l,v));this.offsprings.push(b)}}},{key:"mutate",value:function(t){for(var n=t.clone(),e=0,o=n.brain.connections.length;e<o;e++)Math.random()<i.CONFIG.PERCENTAGE_MUTATION&&(Math.random()<i.CONFIG.PERCENTAGE_MUTATION_ADJUST_WEIGHT?n.brain.connections[e].adjustWeight():n.brain.connections[e].reassignWeight());for(var s=0,r=n.brain.connections.filter(function(t){return!1===t.enabled}).length;s<r;s++)Math.random()<.25&&(n.brain.connections[s].enabled=!0);return Math.random()<i.CONFIG.PERCENTAGE_NEW_NODE&&n.brain.addNode(),Math.random()<i.CONFIG.PERCENTAGE_NEW_CONNECTION&&n.brain.addConnection(),n}},{key:"crossover",value:function(t,n){for(var e=new s.default(t.numInputs,t.numOutputs,t.activation),i=[].concat(u(new Set([].concat(u(t.brain.nodes.map(function(t){return t.id})),u(n.brain.nodes.map(function(t){return t.id})))))),r=function(o,s){t.brain.nodes.some(function(t){return t.id===i[o]})&&n.brain.nodes.some(function(t){return t.id===i[o]})&&(Math.random()<.5?e.nodes.push(t.brain.nodes.find(function(t){return t.id===i[o]}).clone()):e.nodes.push(n.brain.nodes.find(function(t){return t.id===i[o]}).clone()))},a=0,c=i.length;a<c;a++)r(a);var h=[].concat(u(new Set([].concat(u(t.brain.connections.map(function(t){return t.innovation})),u(n.brain.connections.map(function(t){return t.innovation})))))),f=function(i,o){t.brain.connections.some(function(t){return t.innovation===h[i]})&&n.brain.connections.some(function(t){return t.innovation===h[i]})?Math.random()<.5?e.connections.push(t.brain.connections.find(function(t){return t.innovation===h[i]}).clone()):e.connections.push(n.brain.connections.find(function(t){return t.innovation===h[i]}).clone()):t.brain.connections.some(function(t){return t.innovation===h[i]})?t.fitness>=n.fitness&&e.connections.push(t.brain.connections.find(function(t){return t.innovation===h[i]}).clone()):n.fitness>=t.fitness&&e.connections.push(n.brain.connections.find(function(t){return t.innovation===h[i]}).clone())};for(a=0,c=h.length;a<c;a++)f(a);var l=[].concat(u(new Set([].concat(u(e.connections.map(function(t){return t.start})),u(e.connections.map(function(t){return t.end})))))),d=function(i,o){e.nodes.find(function(t){return t.id===l[i]})||(t.brain.nodes.some(function(t){return t.id===l[i]})?e.nodes.push(t.brain.nodes.find(function(t){return t.id===l[i]}).clone()):e.nodes.push(n.brain.nodes.find(function(t){return t.id===l[i]}).clone()))};for(a=0,c=l.length;a<c;a++)d(a);return new o.default(t.generation+1,t.numInputs,t.numOutputs,t.activation,e,t.species)}}])&&a(n.prototype,e),r&&a(n,r),t}();n.default=c,t.exports=n.default}])});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZWF0ZXJKUy93ZWJwYWNrL3VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24iLCJ3ZWJwYWNrOi8vbmVhdGVySlMvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vbmVhdGVySlMvLi9zcmMvY29uZmlnLmpzIiwid2VicGFjazovL25lYXRlckpTLy4vc3JjL3BsYXllci5qcyIsIndlYnBhY2s6Ly9uZWF0ZXJKUy8uL3NyYy9nZW5vbWUuanMiLCJ3ZWJwYWNrOi8vbmVhdGVySlMvLi9zcmMvdXRpbHMuanMiLCJ3ZWJwYWNrOi8vbmVhdGVySlMvLi9zcmMvaW5ub3ZhdGlvbi5qcyIsIndlYnBhY2s6Ly9uZWF0ZXJKUy8uL3NyYy9hY3RpdmF0aW9ucy5qcyIsIndlYnBhY2s6Ly9uZWF0ZXJKUy8uL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly9uZWF0ZXJKUy8uL3NyYy9uZWF0LmpzIiwid2VicGFjazovL25lYXRlckpTLy4vc3JjL3R5cGVzLmpzIiwid2VicGFjazovL25lYXRlckpTLy4vc3JjL25vZGUuanMiLCJ3ZWJwYWNrOi8vbmVhdGVySlMvLi9zcmMvY29ubmVjdGlvbi5qcyIsIndlYnBhY2s6Ly9uZWF0ZXJKUy8uL3NyYy9zcGVjaWVzLmpzIl0sIm5hbWVzIjpbInJvb3QiLCJmYWN0b3J5IiwiZXhwb3J0cyIsIm1vZHVsZSIsImRlZmluZSIsImFtZCIsInNlbGYiLCJ0aGlzIiwiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIkMxIiwiQzIiLCJDMyIsIkNPTVBBQklMSVRZX1RIUkVTSE9MRCIsIlBFUkNFTlRBR0VfTkVXX05PREUiLCJQRVJDRU5UQUdFX05FV19DT05ORUNUSU9OIiwiUEVSQ0VOVEFHRV9NVVRBVElPTiIsIlBFUkNFTlRBR0VfTVVUQVRJT05fQURKVVNUX1dFSUdIVCIsIlNUQUdOQVRJT05fVEhSRVNIT0xEIiwiQURKVVNUX1dFSUdIVF9GQUNUT1IiLCJORVdfV0VJR0hUX1JBTkdFIiwiQUxMT1dfTE9PUFMiLCJfZ2Vub21lIiwiUGxheWVyIiwiZ2VuZXJhdGlvbiIsIm51bUlucHV0cyIsIm51bU91dHB1dHMiLCJhY3RpdmF0aW9uIiwiYnJhaW4iLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJzcGVjaWVzIiwiZml0bmVzcyIsIl9jbGFzc0NhbGxDaGVjayIsImRlZmF1bHQiLCJpbml0aWFsaXplIiwiaW5wdXRWYWx1ZXMiLCJzZXRJbnB1dHMiLCJhY3RpdmF0ZU5ldHdvcmsiLCJjbG9uZSIsIl90eXBlcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJfbm9kZSIsIl9jb25uZWN0aW9uIiwiX2NvbmZpZyIsIl9pbm5vdmF0aW9uIiwiX3V0aWxzIiwiR2Vub21lIiwibnVtSW5wdXROb2RlcyIsIm51bU91dHB1dE5vZGVzIiwibm9kZXMiLCJjb25uZWN0aW9ucyIsInB1c2giLCJCSUFTIiwiSU5QVVQiLCJPVVRQVVQiLCJpbnB1dE5vZGVzIiwiZ2V0SW5wdXROb2RlcyIsIm91dHB1dE5vZGVzIiwiZ2V0T3V0cHV0Tm9kZXMiLCJ3ZWlnaHQiLCJyYW5kb21Eb3VibGVGcm9tSW50ZXJ2YWwiLCJDT05GSUciLCJnZXROZXh0SW5ub3ZhdGlvbk51bWJlciIsImoiLCJzbGljZSIsImNvbm5lY3Rpb24iLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJlbmFibGVkIiwibmV3Tm9kZSIsImdldE5leHROb2RlSWQiLCJISURERU4iLCJzdGFydCIsImlkIiwiZW5kIiwiZ2V0SGlkZGVuTm9kZXMiLCJub2RlMSIsIm5vZGUyIiwiY291bnQiLCJjb25uZWN0aW9uT2siLCJlbmROb2RlcyIsImNvbmNhdCIsImFscmVhZHlDb25uZWN0ZWQiLCJzYW1lTm9kZSIsInRlc3RDb25uZWN0aW9uIiwic29ydE5vZGVzIiwibnVtSGlkZGVuTm9kZXMiLCJzdW0iLCJvdXRwdXRWYWx1ZSIsImhpZGRlbk5vZGVzIiwiYWN0aXZhdGVOb2RlIiwic29ydGVkTm9kZXMiLCJtYXAiLCJub2RlIiwiX3RoaXMiLCJpbnB1dENvbm5lY3Rpb25zIiwiZmlsdGVyIiwibG9jYWxTdW0iLCJfbG9vcCIsInN0YXJ0Tm9kZSIsImZpbmQiLCJzdGFydE5vZGVzIiwiZ2V0Qmlhc05vZGUiLCJvdGhlck5vZGVzIiwiSlNPTiIsInBhcnNlIiwic3RyaW5naWZ5IiwiX2xvb3AyIiwic3BsaWNlIiwiX2xvb3AzIiwic29tZSIsIm1heCIsIm1pbiIsIklubm92YXRpb24iLCJjb25uZWN0aW9uQ291bnRlciIsImNvbm5lY3Rpb25EaWN0Iiwibm9kZUNvdW50ZXIiLCJub2RlRGljdCIsIm5vZGVJZCIsImlubm92YXRpb24iLCJ4IiwicG93IiwiRSIsInRhbmgiLCJzdGVwIiwicG9wdWxhdGlvblNpemUiLCJuZWF0IiwiX25lYXQiLCJBY3RpdmF0aW9ucyIsIl9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkIiwiX3BsYXllciIsIl9zcGVjaWVzNSIsIk5FQVQiLCJiaW5hcnlTdGVwIiwicG9wdWxhdGlvbiIsImJlc3RGaXRuZXNzIiwibnVtU3RhZ25hdGVkIiwic3BlY2llc0RpY3QiLCJwbGF5ZXIiLCJfdG9Db25zdW1hYmxlQXJyYXkiLCJTZXQiLCJyZWR1Y2UiLCJwcmV2IiwiY3VycmVudCIsImRyb3BPcmdhbmlzbXMiLCJpc1N0YWduYXRlZCIsIm92ZXJhbGxDaGFtcGlvbiIsImdldE92ZXJhbGxDaGFtcGlvbiIsImxlbiIsInNwZWNpZXNGb3VuZCIsImlzQ29tcGF0aWJsZVdpdGgiLCJhc3NpZ25Ub1NwZWNpZXMiLCJuZXdTcGVjaWVzSWQiLCJhcHBseSIsImtleXMiLCJvcmdhbmlzbXMiLCJ1bmlxdWVTcGVjaWVzIiwiY2FuZGlkYXRlcyIsInJlcHJlc2VudGF0aXZlIiwidG90YWxGaXRuZXNzU3VtIiwic29ydE9yZ2FuaXNtcyIsImN1bGwiLCJhZGp1c3RGaXRuZXNzIiwiY2FsY3VsYXRlRml0bmVzc1N1bSIsImdldENoYW1waW9uIiwiZml0bmVzc1N1bSIsIm51bU9mZnNwcmluZ3MiLCJudW1DbG9uaW5nIiwibnVtQ3Jvc3NvdmVyIiwicmVwcm9kdWNlIiwib2Zmc3ByaW5ncyIsIm5ld1BsYXllciIsIk5vZGUiLCJ0eXBlIiwiQ29ubmVjdGlvbiIsIlNwZWNpZXMiLCJjaGFtcGlvbiIsImFicyIsIm51bURpc2pvaW50R2VuZXMiLCJudW1FeGNlc3NHZW5lcyIsIm51bU1hdGNoaW5nR2VuZXMiLCJzdW1XZWlnaHREaWZmZXJlbmNlTWF0Y2hpbmdHZW5lcyIsInJlcHJlc2VudGF0aXZlSGlnaGVzdElubm92YXRpb24iLCJwbGF5ZXJIaWdoZXN0SW5ub3ZhdGlvbiIsImlubm92YXRpb25TZXQiLCJhdmdXZWlnaHREaWZmZXJlbmNlTWF0Y2hpbmdHZW5lcyIsIk4iLCJzb3J0IiwiYSIsImIiLCJzdXJ2aXZvcnMiLCJudW1VcHBlckhhbGYiLCJ0aHJlc2hvbGQiLCJzdXJ2aXZvciIsImNoYW1waW9uQ2xvbmUiLCJsZW4yIiwib2Zmc3ByaW5nIiwibXV0YXRlIiwicGFyZW50MSIsInBhcmVudDIiLCJjcm9zc292ZXIiLCJwYXJlbnQiLCJhZGp1c3RXZWlnaHQiLCJyZWFzc2lnbldlaWdodCIsImFkZE5vZGUiLCJhZGRDb25uZWN0aW9uIiwiYnJhaW5PZmZzcHJpbmciLCJub2Rlc1NldCIsIm5lZWRlZE5vZGVzU2V0IiwiX2xvb3A0Il0sIm1hcHBpbmdzIjoiQ0FBQSxTQUFBQSxFQUFBQyxHQUNBLGlCQUFBQyxTQUFBLGlCQUFBQyxPQUNBQSxPQUFBRCxRQUFBRCxJQUNBLG1CQUFB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aEwsVUFDUmdMLEVBQVEvSyxXQUNSK0ssRUFBUTlLLFdBQ1JzTCxFQUNBUixFQUFReksiLCJmaWxlIjoibmVhdGVySlMubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoXCJuZWF0ZXJKU1wiLCBbXSwgZmFjdG9yeSk7XG5cdGVsc2UgaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKVxuXHRcdGV4cG9ydHNbXCJuZWF0ZXJKU1wiXSA9IGZhY3RvcnkoKTtcblx0ZWxzZVxuXHRcdHJvb3RbXCJuZWF0ZXJKU1wiXSA9IGZhY3RvcnkoKTtcbn0pKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJyA/IHNlbGYgOiB0aGlzLCBmdW5jdGlvbigpIHtcbnJldHVybiAiLCIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gNik7XG4iLCJleHBvcnQgbGV0IENPTkZJRyA9IHtcclxuICBDMTogMS4wLFxyXG4gIEMyOiAyLjAsXHJcbiAgQzM6IDQuMCxcclxuICBDT01QQUJJTElUWV9USFJFU0hPTEQ6IDMuMCxcclxuICBQRVJDRU5UQUdFX05FV19OT0RFOiAwLjAzLFxyXG4gIFBFUkNFTlRBR0VfTkVXX0NPTk5FQ1RJT046IDAuMDUsXHJcbiAgUEVSQ0VOVEFHRV9NVVRBVElPTjogMC44LFxyXG4gIFBFUkNFTlRBR0VfTVVUQVRJT05fQURKVVNUX1dFSUdIVDogMC45LFxyXG4gIFNUQUdOQVRJT05fVEhSRVNIT0xEOiAwLjA1LFxyXG4gIEFESlVTVF9XRUlHSFRfRkFDVE9SOiAwLjIsXHJcbiAgTkVXX1dFSUdIVF9SQU5HRTogMS4wLFxyXG4gIEFMTE9XX0xPT1BTOiBmYWxzZVxyXG59O1xyXG4iLCJpbXBvcnQgR2Vub21lIGZyb20gJy4vZ2Vub21lLmpzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBsYXllciB7XHJcbiAgY29uc3RydWN0b3IoZ2VuZXJhdGlvbiwgbnVtSW5wdXRzLCBudW1PdXRwdXRzLCBhY3RpdmF0aW9uLCBicmFpbiA9IHt9LCBzcGVjaWVzID0gMCwgZml0bmVzcyA9IDAuMCkge1xyXG4gICAgdGhpcy5nZW5lcmF0aW9uID0gZ2VuZXJhdGlvbjtcclxuICAgIHRoaXMubnVtSW5wdXRzID0gbnVtSW5wdXRzO1xyXG4gICAgdGhpcy5udW1PdXRwdXRzID0gbnVtT3V0cHV0cztcclxuICAgIHRoaXMuYWN0aXZhdGlvbiA9IGFjdGl2YXRpb247XHJcbiAgICB0aGlzLmZpdG5lc3MgPSBmaXRuZXNzO1xyXG4gICAgdGhpcy5zcGVjaWVzID0gc3BlY2llcztcclxuICAgIHRoaXMuYnJhaW4gPSBicmFpbjtcclxuICB9XHJcblxyXG4gIGluaXRpYWxpemUoKSB7XHJcbiAgICB0aGlzLmJyYWluID0gbmV3IEdlbm9tZSh0aGlzLm51bUlucHV0cywgdGhpcy5udW1PdXRwdXRzLCB0aGlzLmFjdGl2YXRpb24pO1xyXG4gICAgdGhpcy5icmFpbi5pbml0aWFsaXplKCk7XHJcbiAgfVxyXG5cclxuICAvLyB0ZWxsIHBsYXllciB3aGF0IGhlIHNlZXNcclxuICBzZWUoaW5wdXRWYWx1ZXMpIHtcclxuICAgIHRoaXMuYnJhaW4uc2V0SW5wdXRzKGlucHV0VmFsdWVzKTtcclxuICB9XHJcblxyXG4gIC8vIGdldCBvdXRwdXQgdmFsdWVzIGFmdGVyIGFjdGl2YXRpbmcgdGhlIHBsYXllcidzIG5ldHdvcmtcclxuICB0aGluaygpIHtcclxuICAgIHJldHVybiB0aGlzLmJyYWluLmFjdGl2YXRlTmV0d29yaygpO1xyXG4gIH1cclxuXHJcbiAgc2V0Rml0bmVzcyhmaXRuZXNzKSB7XHJcbiAgICB0aGlzLmZpdG5lc3MgPSBmaXRuZXNzO1xyXG4gIH1cclxuXHJcbiAgY2xvbmUoKSB7XHJcbiAgICByZXR1cm4gbmV3IFBsYXllcihcclxuICAgICAgdGhpcy5nZW5lcmF0aW9uLFxyXG4gICAgICB0aGlzLm51bUlucHV0cyxcclxuICAgICAgdGhpcy5udW1PdXRwdXRzLFxyXG4gICAgICB0aGlzLmFjdGl2YXRpb24sXHJcbiAgICAgIHRoaXMuYnJhaW4uY2xvbmUoKSxcclxuICAgICAgdGhpcy5zcGVjaWVzLFxyXG4gICAgICB0aGlzLmZpdG5lc3NcclxuICAgICk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBUeXBlcyBmcm9tICcuL3R5cGVzLmpzJztcclxuaW1wb3J0IE5vZGUgZnJvbSAnLi9ub2RlLmpzJztcclxuaW1wb3J0IENvbm5lY3Rpb24gZnJvbSAnLi9jb25uZWN0aW9uLmpzJztcclxuaW1wb3J0IHsgQ09ORklHIH0gZnJvbSAnLi9jb25maWcuanMnO1xyXG5pbXBvcnQgSW5ub3ZhdGlvbiBmcm9tICcuL2lubm92YXRpb24uanMnO1xyXG5pbXBvcnQgeyByYW5kb21Eb3VibGVGcm9tSW50ZXJ2YWwgfSBmcm9tICcuL3V0aWxzLmpzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEdlbm9tZSB7XHJcbiAgY29uc3RydWN0b3IobnVtSW5wdXROb2RlcywgbnVtT3V0cHV0Tm9kZXMsIGFjdGl2YXRpb24pIHtcclxuICAgIC8vIEJJQVN8SU5QVVQxfElOUFVUMnxPVVRQVVR8SElEREVOXHJcbiAgICAvLyAwICAgfCAgICAgMXwgICAgIDJ8ICAgICAzfCAgICAgNCAgICAgIFBPU0lUSU9OICYgSURcclxuICAgIHRoaXMubm9kZXMgPSBbXTtcclxuICAgIHRoaXMuY29ubmVjdGlvbnMgPSBbXTtcclxuICAgIHRoaXMubnVtSW5wdXROb2RlcyA9IG51bUlucHV0Tm9kZXM7XHJcbiAgICB0aGlzLm51bU91dHB1dE5vZGVzID0gbnVtT3V0cHV0Tm9kZXM7XHJcbiAgICB0aGlzLmFjdGl2YXRpb24gPSBhY3RpdmF0aW9uO1xyXG4gIH1cclxuXHJcbiAgLy8gY29ubmVjdCBpbnB1dCBhbmQgYmlhcyBub2RlcyB0byBvdXRwdXQgbm9kZXMgd2l0aCByYW5kb20gd2VpZ2h0c1xyXG4gIGluaXRpYWxpemUoKSB7XHJcbiAgICAvLyBpbnNlcnQgQklBUyBub2RlXHJcbiAgICB0aGlzLm5vZGVzLnB1c2gobmV3IE5vZGUoMCwgVHlwZXMuQklBUywgMS4wKSk7XHJcblxyXG4gICAgLy8gaW5zZXJ0IElOUFVUIG5vZGVzXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubnVtSW5wdXROb2RlczsgaSsrKSB7XHJcbiAgICAgIHRoaXMubm9kZXMucHVzaChuZXcgTm9kZSgxICsgaSwgVHlwZXMuSU5QVVQpKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBpbnNlcnQgT1VUUFVUIG5vZGVzXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubnVtT3V0cHV0Tm9kZXM7IGkrKykge1xyXG4gICAgICB0aGlzLm5vZGVzLnB1c2gobmV3IE5vZGUoMSArIHRoaXMubnVtSW5wdXROb2RlcyArIGksIFR5cGVzLk9VVFBVVCkpO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBpbnB1dE5vZGVzID0gdGhpcy5nZXRJbnB1dE5vZGVzKCk7XHJcbiAgICBsZXQgb3V0cHV0Tm9kZXMgPSB0aGlzLmdldE91dHB1dE5vZGVzKCk7XHJcblxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBvdXRwdXROb2Rlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICBsZXQgd2VpZ2h0ID0gcmFuZG9tRG91YmxlRnJvbUludGVydmFsKENPTkZJRy5ORVdfV0VJR0hUX1JBTkdFLCAtQ09ORklHLk5FV19XRUlHSFRfUkFOR0UpO1xyXG5cclxuICAgICAgdGhpcy5jb25uZWN0aW9ucy5wdXNoKFxyXG4gICAgICAgIG5ldyBDb25uZWN0aW9uKFxyXG4gICAgICAgICAgMCxcclxuICAgICAgICAgIGkgKyB0aGlzLm51bUlucHV0Tm9kZXMgKyAxLFxyXG4gICAgICAgICAgd2VpZ2h0LFxyXG4gICAgICAgICAgdHJ1ZSxcclxuICAgICAgICAgIElubm92YXRpb24uZ2V0TmV4dElubm92YXRpb25OdW1iZXIoMCwgMSArIHRoaXMubnVtSW5wdXROb2RlcyArIGkpXHJcbiAgICAgICAgKVxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW5wdXROb2Rlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICBmb3IgKGxldCBqID0gMDsgaiA8IG91dHB1dE5vZGVzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgbGV0IHdlaWdodCA9IHJhbmRvbURvdWJsZUZyb21JbnRlcnZhbChDT05GSUcuTkVXX1dFSUdIVF9SQU5HRSwgLUNPTkZJRy5ORVdfV0VJR0hUX1JBTkdFKTtcclxuXHJcbiAgICAgICAgdGhpcy5jb25uZWN0aW9ucy5wdXNoKFxyXG4gICAgICAgICAgbmV3IENvbm5lY3Rpb24oXHJcbiAgICAgICAgICAgIGkgKyAxLFxyXG4gICAgICAgICAgICBqICsgdGhpcy5udW1JbnB1dE5vZGVzICsgMSxcclxuICAgICAgICAgICAgd2VpZ2h0LFxyXG4gICAgICAgICAgICB0cnVlLFxyXG4gICAgICAgICAgICBJbm5vdmF0aW9uLmdldE5leHRJbm5vdmF0aW9uTnVtYmVyKDEgKyBpLCAxICsgdGhpcy5udW1JbnB1dE5vZGVzICsgailcclxuICAgICAgICAgIClcclxuICAgICAgICApO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnZXRCaWFzTm9kZSgpIHtcclxuICAgIHJldHVybiB0aGlzLm5vZGVzWzBdO1xyXG4gIH1cclxuXHJcbiAgZ2V0SW5wdXROb2RlcygpIHtcclxuICAgIHJldHVybiB0aGlzLm5vZGVzLnNsaWNlKDEsIDEgKyB0aGlzLm51bUlucHV0Tm9kZXMpO1xyXG4gIH1cclxuXHJcbiAgZ2V0T3V0cHV0Tm9kZXMoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5ub2Rlcy5zbGljZSgxICsgdGhpcy5udW1JbnB1dE5vZGVzLCAxICsgdGhpcy5udW1JbnB1dE5vZGVzICsgdGhpcy5udW1PdXRwdXROb2Rlcyk7XHJcbiAgfVxyXG5cclxuICBnZXRIaWRkZW5Ob2RlcygpIHtcclxuICAgIHJldHVybiB0aGlzLm5vZGVzLnNsaWNlKDEgKyB0aGlzLm51bUlucHV0Tm9kZXMgKyB0aGlzLm51bU91dHB1dE5vZGVzKTtcclxuICB9XHJcblxyXG4gIC8vIE11dGF0aW9uOiBhZGQgbmV3IG5vZGUgaW4gYmV0d2VlbiB0d28gbm9kZXMgd2hvIHdlcmUgcHJldmlvdXNseSBjb25uZWN0ZWRcclxuICAvLyBkaXNhYmxlIG9sZCBjb25uZWN0aW9uIGFuZCByZXBsYWNlIGl0IHdpdGggb25lIG5ldyBub2RlIGFuZCB0d28gbmV3IGNvbm5lY3Rpb25zXHJcbiAgLy8gc3RhcnQgdG8gbmV3IG5vZGUgZ2V0cyB3ZWlnaHQgMS4wXHJcbiAgLy8gbmV3IG5vZGUgdG8gZW5kIGdldHMgd2VpZ2h0IG9mIG9sZCBjb25uZWN0aW9uXHJcbiAgYWRkTm9kZSgpIHtcclxuICAgIGxldCBjb25uZWN0aW9uID0gdGhpcy5jb25uZWN0aW9uc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiB0aGlzLmNvbm5lY3Rpb25zLmxlbmd0aCldO1xyXG5cclxuICAgIGNvbm5lY3Rpb24uZW5hYmxlZCA9IGZhbHNlO1xyXG4gICAgbGV0IG5ld05vZGUgPSBuZXcgTm9kZShJbm5vdmF0aW9uLmdldE5leHROb2RlSWQoY29ubmVjdGlvbiksIFR5cGVzLkhJRERFTik7XHJcblxyXG4gICAgdGhpcy5ub2Rlcy5wdXNoKG5ld05vZGUpO1xyXG4gICAgdGhpcy5jb25uZWN0aW9ucy5wdXNoKFxyXG4gICAgICBuZXcgQ29ubmVjdGlvbihcclxuICAgICAgICBjb25uZWN0aW9uLnN0YXJ0LFxyXG4gICAgICAgIG5ld05vZGUuaWQsXHJcbiAgICAgICAgMS4wLFxyXG4gICAgICAgIHRydWUsXHJcbiAgICAgICAgSW5ub3ZhdGlvbi5nZXROZXh0SW5ub3ZhdGlvbk51bWJlcihjb25uZWN0aW9uLnN0YXJ0LCBuZXdOb2RlLmlkKVxyXG4gICAgICApXHJcbiAgICApO1xyXG4gICAgdGhpcy5jb25uZWN0aW9ucy5wdXNoKFxyXG4gICAgICBuZXcgQ29ubmVjdGlvbihcclxuICAgICAgICBuZXdOb2RlLmlkLFxyXG4gICAgICAgIGNvbm5lY3Rpb24uZW5kLFxyXG4gICAgICAgIGNvbm5lY3Rpb24ud2VpZ2h0LFxyXG4gICAgICAgIHRydWUsXHJcbiAgICAgICAgSW5ub3ZhdGlvbi5nZXROZXh0SW5ub3ZhdGlvbk51bWJlcihuZXdOb2RlLmlkLCBjb25uZWN0aW9uLmVuZClcclxuICAgICAgKVxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIC8vIE11dGF0aW9uOiBhZGQgbmV3IGNvbm5lY3Rpb24gYmV0d2VlbiB0d28gdW5jb25uZWN0ZWQgbm9kZXNcclxuICAvLyBpbnZhbGlkIGNvbm5lY3Rpb25zOlxyXG4gIC8vICAtIGFscmVhZHkgY29ubmVjdGVkIG5vZGVzXHJcbiAgLy8gIC0gdHdvIGlucHV0IG5vZGVzXHJcbiAgLy8gIC0gaW5wdXQgbm9kZSBhbmQgYmlhc1xyXG4gIC8vICAtIHNhbWUgbm9kZVxyXG4gIGFkZENvbm5lY3Rpb24oKSB7XHJcbiAgICBpZiAodGhpcy5nZXRIaWRkZW5Ob2RlcygpLmxlbmd0aCA8IDEpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBjb3VudCA9IDA7XHJcbiAgICBsZXQgY29ubmVjdGlvbk9rID0gZmFsc2U7XHJcbiAgICBsZXQgbm9kZTE7XHJcbiAgICBsZXQgbm9kZTI7XHJcbiAgICBsZXQgZW5kTm9kZXMgPSB0aGlzLmdldEhpZGRlbk5vZGVzKCkuY29uY2F0KHRoaXMuZ2V0T3V0cHV0Tm9kZXMoKSk7XHJcblxyXG4gICAgd2hpbGUgKCFjb25uZWN0aW9uT2spIHtcclxuICAgICAgbm9kZTEgPSB0aGlzLm5vZGVzW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHRoaXMubm9kZXMubGVuZ3RoKV07XHJcbiAgICAgIG5vZGUyID0gZW5kTm9kZXNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogZW5kTm9kZXMubGVuZ3RoKV07XHJcblxyXG4gICAgICBjb25uZWN0aW9uT2sgPSAhdGhpcy5hbHJlYWR5Q29ubmVjdGVkKG5vZGUxLCBub2RlMik7XHJcblxyXG4gICAgICBpZiAoIUNPTkZJRy5BTExPV19MT09QUykge1xyXG4gICAgICAgIGNvbm5lY3Rpb25PayA9IGNvbm5lY3Rpb25PayAmJiAhdGhpcy5zYW1lTm9kZShub2RlMSwgbm9kZTIpO1xyXG4gICAgICAgIGlmIChjb25uZWN0aW9uT2spIHtcclxuICAgICAgICAgIC8vIGNoZWNrIGZvciBsb29wc1xyXG4gICAgICAgICAgbGV0IHRlc3RDb25uZWN0aW9uID0gbmV3IENvbm5lY3Rpb24obm9kZTEuaWQsIG5vZGUyLmlkLCAxLjAsIHRydWUsIC0xKTtcclxuXHJcbiAgICAgICAgICBpZiAodGhpcy5zb3J0Tm9kZXModGVzdENvbm5lY3Rpb24pKSB7XHJcbiAgICAgICAgICAgIGNvbm5lY3Rpb25PayA9IHRydWU7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25uZWN0aW9uT2sgPSBmYWxzZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvdW50Kys7XHJcbiAgICAgIC8vIGlmIHdlIGNhbid0IGZpbmQgYSBzdWl0YWJsZSBjb25uZWN0aW9uIHdpdGhpbiA1MCB0cmllcywgcmV0dXJuXHJcbiAgICAgIGlmIChjb3VudCA+IDUwKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHdlaWdodCA9IHJhbmRvbURvdWJsZUZyb21JbnRlcnZhbChDT05GSUcuTkVXX1dFSUdIVF9SQU5HRSwgLUNPTkZJRy5ORVdfV0VJR0hUX1JBTkdFKTtcclxuXHJcbiAgICB0aGlzLmNvbm5lY3Rpb25zLnB1c2goXHJcbiAgICAgIG5ldyBDb25uZWN0aW9uKG5vZGUxLmlkLCBub2RlMi5pZCwgd2VpZ2h0LCB0cnVlLCBJbm5vdmF0aW9uLmdldE5leHRJbm5vdmF0aW9uTnVtYmVyKG5vZGUxLmlkLCBub2RlMi5pZCkpXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgLy8gUmV0dXJucyB0cnVlIGlmIG5ldHdvcmsgaXMgZnVsbHkgc2F0aXNmaWVkLCBpLmUuIG5vIG5ldyBjb25uZWN0aW9uIHBvc3NpYmxlXHJcbiAgLy8gaW5wdXQgbm9kZXMgY2FuIGJlIGNvbm5lY3RlZCB0byBoaWRkZW4gYW5kIG91dHB1dCBub2Rlcywgbm8gbG9vcHNcclxuICAvLyBiaWFzIG5vZGVzIGNhbiBiZSBjb25uZWNlZCB0byBoaWRkZW4gYW5kIG91dHB1dCBub2Rlcywgbm8gbG9vcHNcclxuICAvLyBoaWRkZW4gbm9kZXMgY2FuIGJlIG9ubHkgY29ubmVjdGVkIHRvIGhpZGRlbiBhbmQgb3V0cHV0IG5vZGVzXHJcbiAgLy8gb3V0cHV0IG5vZGVzIGNhbiBiZSBjb25uZWN0ZWQgdG8gaGlkZGVuIGFuZCBvdXRwdXQgbm9kZXNcclxuICBpc0Z1bGx5Q29ubmVjdGVkKCkge1xyXG4gICAgY29uc3QgbnVtSGlkZGVuTm9kZXMgPSB0aGlzLmdldEhpZGRlbk5vZGVzKCkubGVuZ3RoO1xyXG4gICAgbGV0IHN1bSA9IDA7XHJcblxyXG4gICAgaWYgKCFDT05GSUcuQUxMT1dfTE9PUFMpIHtcclxuICAgICAgY29uc3QgbnVtQ29ubmVjdGlvbnNGcm9tSW5wdXQgPSB0aGlzLm51bUlucHV0Tm9kZXMgKiAobnVtSGlkZGVuTm9kZXMgKyB0aGlzLm51bU91dHB1dE5vZGVzKTtcclxuICAgICAgY29uc3QgbnVtQ29ubmVjdGlvbnNGcm9tSGlkZGVuID0gbnVtSGlkZGVuTm9kZXMgKiAobnVtSGlkZGVuTm9kZXMgLSAxICsgdGhpcy5udW1PdXRwdXROb2Rlcyk7XHJcbiAgICAgIGNvbnN0IG51bUNvbm5lY3Rpb25zRnJvbUJpYXMgPSBudW1IaWRkZW5Ob2RlcyArIHRoaXMubnVtT3V0cHV0Tm9kZXM7XHJcblxyXG4gICAgICBzdW0gPSBudW1Db25uZWN0aW9uc0Zyb21JbnB1dCArIG51bUNvbm5lY3Rpb25zRnJvbUhpZGRlbiArIG51bUNvbm5lY3Rpb25zRnJvbUJpYXM7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zdCBudW1Db25uZWN0aW9uc0Zyb21JbnB1dCA9IHRoaXMubnVtSW5wdXROb2RlcyAqIChudW1IaWRkZW5Ob2RlcyArIHRoaXMubnVtT3V0cHV0Tm9kZXMpO1xyXG4gICAgICBjb25zdCBudW1Db25uZWN0aW9uc0Zyb21IaWRkZW4gPSBudW1IaWRkZW5Ob2RlcyAqIChudW1IaWRkZW5Ob2RlcyArIHRoaXMubnVtT3V0cHV0Tm9kZXMpO1xyXG4gICAgICBjb25zdCBudW1Db25uZWN0aW9uc0Zyb21CaWFzID0gbnVtSGlkZGVuTm9kZXMgKyB0aGlzLm51bU91dHB1dE5vZGVzO1xyXG4gICAgICBjb25zdCBudW1Db25uZWN0aW9uc0Zyb21PdXRwdXQgPSB0aGlzLm51bU91dHB1dE5vZGVzICogKG51bUhpZGRlbk5vZGVzICsgdGhpcy5udW1PdXRwdXROb2Rlcyk7XHJcblxyXG4gICAgICBzdW0gPSBudW1Db25uZWN0aW9uc0Zyb21JbnB1dCArIG51bUNvbm5lY3Rpb25zRnJvbUhpZGRlbiArIG51bUNvbm5lY3Rpb25zRnJvbUJpYXMgKyBudW1Db25uZWN0aW9uc0Zyb21PdXRwdXQ7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHN1bSA9PT0gdGhpcy5jb25uZWN0aW9ucy5sZW5ndGg7XHJcbiAgfVxyXG5cclxuICBhbHJlYWR5Q29ubmVjdGVkKG5vZGUxLCBub2RlMikge1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmNvbm5lY3Rpb25zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGlmICh0aGlzLmNvbm5lY3Rpb25zW2ldLnN0YXJ0ID09PSBub2RlMS5pZCAmJiB0aGlzLmNvbm5lY3Rpb25zW2ldLmVuZCA9PT0gbm9kZTIuaWQpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgc2FtZU5vZGUobm9kZTEsIG5vZGUyKSB7XHJcbiAgICBpZiAoQ09ORklHLkFMTE9XX0xPT1BTKSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIHJldHVybiBub2RlMS5pZCA9PT0gbm9kZTIuaWQ7XHJcbiAgfVxyXG5cclxuICByZXNldE5ldHdvcmsoKSB7XHJcbiAgICBmb3IgKGxldCBpID0gMTsgaSA8PSB0aGlzLm5vZGVzOyBpKyspIHtcclxuICAgICAgdGhpcy5ub2Rlc1tpXS5vdXRwdXRWYWx1ZSA9IDA7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRJbnB1dHMoaW5wdXRWYWx1ZXMpIHtcclxuICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IHRoaXMubnVtSW5wdXROb2RlczsgaSsrKSB7XHJcbiAgICAgIHRoaXMubm9kZXNbaV0ub3V0cHV0VmFsdWUgPSBpbnB1dFZhbHVlc1tpIC0gMV07XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhY3RpdmF0ZU5ldHdvcmsoKSB7XHJcbiAgICBpZiAoIUNPTkZJRy5BTExPV19MT09QUykge1xyXG4gICAgICBsZXQgc29ydGVkTm9kZXMgPSB0aGlzLnNvcnROb2RlcygpO1xyXG5cclxuICAgICAgZm9yIChsZXQgaSA9IDEgKyB0aGlzLm51bUlucHV0Tm9kZXM7IGkgPCBzb3J0ZWROb2Rlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIHRoaXMuYWN0aXZhdGVOb2RlKHNvcnRlZE5vZGVzW2ldKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gYWN0aXZhdGUgaGlkZGVuIG5vZGVzLCB0aGVuIG91dHB1dCBub2Rlc1xyXG4gICAgICBsZXQgaGlkZGVuTm9kZXMgPSB0aGlzLmdldEhpZGRlbk5vZGVzKCk7XHJcblxyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGhpZGRlbk5vZGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgdGhpcy5hY3RpdmF0ZU5vZGUoaGlkZGVuTm9kZXNbaV0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBsZXQgb3V0cHV0Tm9kZXMgPSB0aGlzLmdldE91dHB1dE5vZGVzKCk7XHJcblxyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG91dHB1dE5vZGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgdGhpcy5hY3RpdmF0ZU5vZGUob3V0cHV0Tm9kZXNbaV0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gcmV0dXJuIG91dHB1dCB2YWx1ZXNcclxuICAgIHJldHVybiB0aGlzLmdldE91dHB1dE5vZGVzKCkubWFwKG4gPT4gbi5vdXRwdXRWYWx1ZSk7XHJcbiAgfVxyXG5cclxuICBhY3RpdmF0ZU5vZGUobm9kZSkge1xyXG4gICAgLy8gZG8gbm90IGZpcmUgaWYgZGlzYWJsZWRcclxuICAgIGxldCBpbnB1dENvbm5lY3Rpb25zID0gdGhpcy5jb25uZWN0aW9ucy5maWx0ZXIoYyA9PiBjLmVuZCA9PT0gbm9kZS5pZCk7XHJcbiAgICBsZXQgbG9jYWxTdW0gPSAwLjA7XHJcblxyXG4gICAgZm9yIChsZXQgaiA9IDA7IGogPCBpbnB1dENvbm5lY3Rpb25zLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgIGlmICghaW5wdXRDb25uZWN0aW9uc1tqXS5lbmFibGVkKSB7XHJcbiAgICAgICAgY29udGludWU7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGxldCBzdGFydE5vZGUgPSB0aGlzLm5vZGVzLmZpbmQobiA9PiBuLmlkID09PSBpbnB1dENvbm5lY3Rpb25zW2pdLnN0YXJ0KTtcclxuXHJcbiAgICAgIGxvY2FsU3VtICs9IHN0YXJ0Tm9kZS5vdXRwdXRWYWx1ZSAqIGlucHV0Q29ubmVjdGlvbnNbal0ud2VpZ2h0O1xyXG4gICAgfVxyXG5cclxuICAgIG5vZGUub3V0cHV0VmFsdWUgPSB0aGlzLmFjdGl2YXRpb24obG9jYWxTdW0pO1xyXG4gIH1cclxuXHJcbiAgc29ydE5vZGVzKHRlc3RDb25uZWN0aW9uID0gbnVsbCkge1xyXG4gICAgbGV0IHNvcnRlZE5vZGVzID0gW107XHJcbiAgICBsZXQgc3RhcnROb2RlcyA9IFt0aGlzLmdldEJpYXNOb2RlKCldLmNvbmNhdCh0aGlzLmdldElucHV0Tm9kZXMoKSk7XHJcbiAgICBsZXQgb3RoZXJOb2RlcyA9IHRoaXMuZ2V0SGlkZGVuTm9kZXMoKS5jb25jYXQodGhpcy5nZXRPdXRwdXROb2RlcygpKTtcclxuXHJcbiAgICBsZXQgY29ubmVjdGlvbnMgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuY29ubmVjdGlvbnMuZmlsdGVyKGMgPT4gYy5lbmFibGVkKSkpO1xyXG5cclxuICAgIGlmICh0ZXN0Q29ubmVjdGlvbikge1xyXG4gICAgICBjb25uZWN0aW9ucy5wdXNoKHRlc3RDb25uZWN0aW9uKTtcclxuICAgIH1cclxuXHJcbiAgICB3aGlsZSAoc3RhcnROb2Rlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGxldCBub2RlID0gc3RhcnROb2Rlcy5zcGxpY2UoMCwgMSlbMF07XHJcblxyXG4gICAgICBzb3J0ZWROb2Rlcy5wdXNoKG5vZGUpO1xyXG5cclxuICAgICAgY29ubmVjdGlvbnMgPSBjb25uZWN0aW9ucy5maWx0ZXIoYyA9PiBjLnN0YXJ0ICE9PSBub2RlLmlkKTtcclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBvdGhlck5vZGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgaWYgKCFjb25uZWN0aW9ucy5zb21lKGMgPT4gYy5lbmQgPT09IG90aGVyTm9kZXNbaV0uaWQpKSB7XHJcbiAgICAgICAgICBzdGFydE5vZGVzLnB1c2gob3RoZXJOb2Rlcy5zcGxpY2UoaSwgMSlbMF0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmIChjb25uZWN0aW9ucy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIHJldHVybiBzb3J0ZWROb2RlcztcclxuICB9XHJcblxyXG4gIGNsb25lKCkge1xyXG4gICAgbGV0IGNsb25lID0gbmV3IEdlbm9tZSh0aGlzLm51bUlucHV0Tm9kZXMsIHRoaXMubnVtT3V0cHV0Tm9kZXMsIHRoaXMuYWN0aXZhdGlvbik7XHJcblxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm5vZGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGNsb25lLm5vZGVzLnB1c2godGhpcy5ub2Rlc1tpXS5jbG9uZSgpKTtcclxuICAgIH1cclxuXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY29ubmVjdGlvbnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgY2xvbmUuY29ubmVjdGlvbnMucHVzaCh0aGlzLmNvbm5lY3Rpb25zW2ldLmNsb25lKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBjbG9uZTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGZ1bmN0aW9uIHJhbmRvbURvdWJsZUZyb21JbnRlcnZhbChtYXgsIG1pbikge1xyXG4gIHJldHVybiBNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbikgKyBtaW47XHJcbn1cclxuIiwiY2xhc3MgSW5ub3ZhdGlvbiB7XHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICB0aGlzLmNvbm5lY3Rpb25Db3VudGVyID0gLTE7XHJcbiAgICB0aGlzLmNvbm5lY3Rpb25EaWN0ID0gW107XHJcbiAgICB0aGlzLm5vZGVDb3VudGVyID0gLTE7XHJcbiAgICB0aGlzLm5vZGVEaWN0ID0gW107XHJcbiAgfVxyXG5cclxuICBnZXROZXh0Tm9kZUlkKGNvbm5lY3Rpb24pIHtcclxuICAgIGlmICh0aGlzLm5vZGVEaWN0LnNvbWUoYyA9PiBjLnN0YXJ0ID09PSBjb25uZWN0aW9uLnN0YXJ0ICYmIGMuZW5kID09PSBjb25uZWN0aW9uLmVuZCkpIHtcclxuICAgICAgcmV0dXJuIHRoaXMubm9kZURpY3QuZmluZChjID0+IGMuc3RhcnQgPT09IGNvbm5lY3Rpb24uc3RhcnQgJiYgYy5lbmQgPT09IGNvbm5lY3Rpb24uZW5kKS5ub2RlSWQ7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5ub2RlQ291bnRlcisrO1xyXG4gICAgdGhpcy5ub2RlRGljdC5wdXNoKHsgc3RhcnQ6IGNvbm5lY3Rpb24uc3RhcnQsIGVuZDogY29ubmVjdGlvbi5lbmQsIG5vZGVJZDogdGhpcy5ub2RlQ291bnRlciB9KTtcclxuICAgIHJldHVybiB0aGlzLm5vZGVDb3VudGVyO1xyXG4gIH1cclxuXHJcbiAgZ2V0TmV4dElubm92YXRpb25OdW1iZXIoc3RhcnQsIGVuZCkge1xyXG4gICAgaWYgKHRoaXMuY29ubmVjdGlvbkRpY3Quc29tZShjID0+IGMuc3RhcnQgPT09IHN0YXJ0ICYmIGMuZW5kID09PSBlbmQpKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLmNvbm5lY3Rpb25EaWN0LmZpbmQoYyA9PiBjLnN0YXJ0ID09PSBzdGFydCAmJiBjLmVuZCA9PT0gZW5kKS5pbm5vdmF0aW9uO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuY29ubmVjdGlvbkNvdW50ZXIrKztcclxuICAgIHRoaXMuY29ubmVjdGlvbkRpY3QucHVzaCh7IHN0YXJ0OiBzdGFydCwgZW5kOiBlbmQsIGlubm92YXRpb246IHRoaXMuY29ubmVjdGlvbkNvdW50ZXIgfSk7XHJcbiAgICByZXR1cm4gdGhpcy5jb25uZWN0aW9uQ291bnRlcjtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IG5ldyBJbm5vdmF0aW9uKCk7XHJcbiIsImV4cG9ydCBmdW5jdGlvbiBzaWdtb2lkKHgpIHtcclxuICByZXR1cm4gMS4wIC8gKDEuMCArIE1hdGgucG93KE1hdGguRSwgLTQuOSAqIHgpKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHRhbmgoeCkge1xyXG4gIHJldHVybiBNYXRoLnRhbmgoeCk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBiaW5hcnlTdGVwKHgsIHN0ZXAgPSAwLjUpIHtcclxuICByZXR1cm4geCA8IHN0ZXAgPyAwLjAgOiAxLjA7XHJcbn1cclxuIiwiaW1wb3J0IE5FQVQgZnJvbSAnLi9uZWF0LmpzJztcclxuaW1wb3J0ICogYXMgQWN0aXZhdGlvbnMgZnJvbSAnLi9hY3RpdmF0aW9ucy5qcyc7XHJcbmltcG9ydCB7IENPTkZJRyB9IGZyb20gJy4vY29uZmlnLmpzJztcclxuXHJcbmV4cG9ydCB7IEFjdGl2YXRpb25zLCBDT05GSUcgfTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBpbml0KHBvcHVsYXRpb25TaXplID0gMTAwLCBudW1JbnB1dHMsIG51bU91dHB1dHMpIHtcclxuICBsZXQgbmVhdCA9IG5ldyBORUFUKHBvcHVsYXRpb25TaXplLCBudW1JbnB1dHMsIG51bU91dHB1dHMpO1xyXG5cclxuICBuZWF0LmluaXRpYWxpemUoKTtcclxuICByZXR1cm4gbmVhdDtcclxufVxyXG4iLCJpbXBvcnQgUGxheWVyIGZyb20gJy4vcGxheWVyLmpzJztcclxuaW1wb3J0IElubm92YXRpb24gZnJvbSAnLi9pbm5vdmF0aW9uLmpzJztcclxuaW1wb3J0IFNwZWNpZXMgZnJvbSAnLi9zcGVjaWVzLmpzJztcclxuaW1wb3J0ICogYXMgQWN0aXZhdGlvbnMgZnJvbSAnLi9hY3RpdmF0aW9ucy5qcyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBORUFUIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1bGF0aW9uU2l6ZSA9IDEwMCwgbnVtSW5wdXRzLCBudW1PdXRwdXRzLCBhY3RpdmF0aW9uID0gQWN0aXZhdGlvbnMuYmluYXJ5U3RlcCkge1xyXG4gICAgdGhpcy5wb3B1bGF0aW9uID0gW107XHJcbiAgICB0aGlzLnBvcHVsYXRpb25TaXplID0gcG9wdWxhdGlvblNpemU7XHJcbiAgICB0aGlzLm51bUlucHV0cyA9IG51bUlucHV0cztcclxuICAgIHRoaXMubnVtT3V0cHV0cyA9IG51bU91dHB1dHM7XHJcbiAgICB0aGlzLmFjdGl2YXRpb24gPSBhY3RpdmF0aW9uO1xyXG4gICAgdGhpcy5nZW5lcmF0aW9uID0gMDtcclxuICAgIHRoaXMuYmVzdEZpdG5lc3MgPSAwO1xyXG4gICAgdGhpcy5udW1TdGFnbmF0ZWQgPSAwO1xyXG4gICAgdGhpcy5zcGVjaWVzRGljdCA9IHt9O1xyXG4gIH1cclxuXHJcbiAgaW5pdGlhbGl6ZSgpIHtcclxuICAgIElubm92YXRpb24ubm9kZUNvdW50ZXIgPSB0aGlzLm51bUlucHV0cyArIHRoaXMubnVtT3V0cHV0cztcclxuXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucG9wdWxhdGlvblNpemU7IGkrKykge1xyXG4gICAgICBsZXQgcGxheWVyID0gbmV3IFBsYXllcih0aGlzLmdlbmVyYXRpb24sIHRoaXMubnVtSW5wdXRzLCB0aGlzLm51bU91dHB1dHMsIHRoaXMuYWN0aXZhdGlvbik7XHJcblxyXG4gICAgICBwbGF5ZXIuaW5pdGlhbGl6ZSgpO1xyXG4gICAgICB0aGlzLnBvcHVsYXRpb24ucHVzaChwbGF5ZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuc3BlY2llc0RpY3RbMF0gPSBuZXcgU3BlY2llcygwLCB0aGlzLnBvcHVsYXRpb25bMF0uY2xvbmUoKSk7XHJcbiAgfVxyXG5cclxuICBnZXROdW1iZXJPZlNwZWNpZXMoKSB7XHJcbiAgICByZXR1cm4gWy4uLm5ldyBTZXQodGhpcy5wb3B1bGF0aW9uLm1hcChwID0+IHAuc3BlY2llcykpXS5sZW5ndGg7XHJcbiAgfVxyXG5cclxuICBnZXRPdmVyYWxsQ2hhbXBpb24oKSB7XHJcbiAgICByZXR1cm4gdGhpcy5wb3B1bGF0aW9uLnJlZHVjZSgocHJldiwgY3VycmVudCkgPT4gKHByZXYuZml0bmVzcyA+IGN1cnJlbnQuZml0bmVzcyA/IHByZXYgOiBjdXJyZW50KSk7XHJcbiAgfVxyXG5cclxuICByZXBvcHVsYXRlKCkge1xyXG4gICAgLy8gcmVzZXQgb3JnYW5pc21zXHJcbiAgICBpZiAodGhpcy5nZW5lcmF0aW9uID4gMCkge1xyXG4gICAgICBmb3IgKGxldCBqIGluIHRoaXMuc3BlY2llc0RpY3QpIHtcclxuICAgICAgICBsZXQgc3BlY2llcyA9IHRoaXMuc3BlY2llc0RpY3Rbal07XHJcblxyXG4gICAgICAgIHNwZWNpZXMuZHJvcE9yZ2FuaXNtcygpO1xyXG5cclxuICAgICAgICBpZiAoc3BlY2llcy5pc1N0YWduYXRlZCgpKSB7XHJcbiAgICAgICAgICB0aGlzLnBvcHVsYXRpb24gPSB0aGlzLnBvcHVsYXRpb24uZmlsdGVyKHAgPT4gcC5zcGVjaWVzICE9PSBzcGVjaWVzLmlkKTtcclxuICAgICAgICAgIGRlbGV0ZSB0aGlzLnNwZWNpZXNEaWN0W2pdO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgbGV0IG92ZXJhbGxDaGFtcGlvbiA9IHRoaXMuZ2V0T3ZlcmFsbENoYW1waW9uKCk7XHJcblxyXG4gICAgICBpZiAob3ZlcmFsbENoYW1waW9uLmZpdG5lc3MgPiB0aGlzLmJlc3RGaXRuZXNzKSB7XHJcbiAgICAgICAgdGhpcy5iZXN0Rml0bmVzcyA9IG92ZXJhbGxDaGFtcGlvbi5maXRuZXNzO1xyXG4gICAgICAgIHRoaXMubnVtU3RhZ25hdGVkID0gMDtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLm51bVN0YWduYXRlZCsrO1xyXG5cclxuICAgICAgICAvLyBubyBpbXByb3ZlbWVudHMgb3ZlciAyMCBnZW5lcmF0aW9ucywgb25seSBsZXQgdGhlIHR3byBiZXN0IHNwZWNpZXMgcmVwcm9kdWNlXHJcbiAgICAgICAgLy8gaWYgKHRoaXMubnVtU3RhZ25hdGVkID4gMTkpIHtcclxuICAgICAgICAvLyAgIHRoaXMubnVtU3RhZ25hdGVkID0gMDtcclxuXHJcbiAgICAgICAgLy8gICBpZiAoWy4uLm5ldyBTZXQodGhpcy5wb3B1bGF0aW9uLm1hcChwID0+IHAuc3BlY2llcykpXS5sZW5ndGggPiAxKSB7XHJcbiAgICAgICAgLy8gICAgIGxldCBjbG9uZWRQb3B1bGF0aW9uID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLnBvcHVsYXRpb24pKS5zb3J0KChhLCBiKSA9PiBiLmZpdG5lc3MgLSBhLmZpdG5lc3MpO1xyXG4gICAgICAgIC8vICAgICBsZXQgc3BlY2llc0lkMSA9IGNsb25lZFBvcHVsYXRpb25bMF0uc3BlY2llcztcclxuICAgICAgICAvLyAgICAgbGV0IHNwZWNpZXNJZDI7XHJcblxyXG4gICAgICAgIC8vICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNsb25lZFBvcHVsYXRpb24ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAvLyAgICAgICBpZiAoY2xvbmVkUG9wdWxhdGlvbltpXS5zcGVjaWVzICE9PSBzcGVjaWVzSWQxKSB7XHJcbiAgICAgICAgLy8gICAgICAgICBzcGVjaWVzSWQyID0gY2xvbmVkUG9wdWxhdGlvbltpXS5zcGVjaWVzO1xyXG4gICAgICAgIC8vICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgLy8gICAgICAgfVxyXG4gICAgICAgIC8vICAgICB9XHJcblxyXG4gICAgICAgIC8vICAgICB0aGlzLnBvcHVsYXRpb24gPSB0aGlzLnBvcHVsYXRpb24uZmlsdGVyKHAgPT4gcC5zcGVjaWVzID09PSBzcGVjaWVzSWQxIHx8IHAuc3BlY2llcyA9PT0gc3BlY2llc0lkMik7XHJcbiAgICAgICAgLy8gICAgIGZvciAobGV0IGogaW4gdGhpcy5zcGVjaWVzRGljdCkge1xyXG4gICAgICAgIC8vICAgICAgIGxldCBzcGVjaWVzID0gdGhpcy5zcGVjaWVzRGljdFtqXTtcclxuXHJcbiAgICAgICAgLy8gICAgICAgaWYgKHNwZWNpZXMuaWQgIT09IHNwZWNpZXNJZDEgJiYgc3BlY2llcy5pZCAhPT0gc3BlY2llc0lkMikge1xyXG4gICAgICAgIC8vICAgICAgICAgZGVsZXRlIHRoaXMuc3BlY2llc0RpY3Rbal07XHJcbiAgICAgICAgLy8gICAgICAgfVxyXG4gICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgLy8gICB9XHJcbiAgICAgICAgLy8gfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5nZW5lcmF0aW9uKys7XHJcblxyXG4gICAgLy8gYXNzaWduIHBvcHVsYXRpb24gdG8gc3BlY2llc1xyXG4gICAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IHRoaXMucG9wdWxhdGlvbi5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xyXG4gICAgICBsZXQgc3BlY2llc0ZvdW5kID0gZmFsc2U7XHJcblxyXG4gICAgICBmb3IgKGxldCBqIGluIHRoaXMuc3BlY2llc0RpY3QpIHtcclxuICAgICAgICBsZXQgc3BlY2llcyA9IHRoaXMuc3BlY2llc0RpY3Rbal07XHJcblxyXG4gICAgICAgIGlmIChzcGVjaWVzLmlzQ29tcGF0aWJsZVdpdGgodGhpcy5wb3B1bGF0aW9uW2ldKSkge1xyXG4gICAgICAgICAgc3BlY2llc0ZvdW5kID0gdHJ1ZTtcclxuICAgICAgICAgIHNwZWNpZXMuYXNzaWduVG9TcGVjaWVzKHRoaXMucG9wdWxhdGlvbltpXSk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICghc3BlY2llc0ZvdW5kKSB7XHJcbiAgICAgICAgY29uc3QgbmV3U3BlY2llc0lkID0gTWF0aC5tYXgoLi4uT2JqZWN0LmtleXModGhpcy5zcGVjaWVzRGljdCkubWFwKGlkID0+ICtpZCkpICsgMTtcclxuXHJcbiAgICAgICAgdGhpcy5zcGVjaWVzRGljdFtuZXdTcGVjaWVzSWRdID0gbmV3IFNwZWNpZXMobmV3U3BlY2llc0lkLCB0aGlzLnBvcHVsYXRpb25baV0uY2xvbmUoKSk7XHJcbiAgICAgICAgdGhpcy5zcGVjaWVzRGljdFtuZXdTcGVjaWVzSWRdLmFzc2lnblRvU3BlY2llcyh0aGlzLnBvcHVsYXRpb25baV0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gZGVsZXRlIHNwZWNpZXMgd2l0aCBub3QgZW5vdWdoIG9yZ2FuaXNtc1xyXG4gICAgZm9yIChsZXQga2V5IGluIHRoaXMuc3BlY2llc0RpY3QpIHtcclxuICAgICAgbGV0IHNwZWNpZXMgPSB0aGlzLnNwZWNpZXNEaWN0W2tleV07XHJcblxyXG4gICAgICBpZiAoc3BlY2llcy5vcmdhbmlzbXMubGVuZ3RoIDwgMSkge1xyXG4gICAgICAgIC8vIHRoaXMucG9wdWxhdGlvbiA9IHRoaXMucG9wdWxhdGlvbi5maWx0ZXIocCA9PiBwLnNwZWNpZXMgIT09IHNwZWNpZXMuaWQpO1xyXG4gICAgICAgIGRlbGV0ZSB0aGlzLnNwZWNpZXNEaWN0W2tleV07XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyB1cGRhdGUgcmVwcmVzZW50YXRpdmUgcGVyIHNwZWNpZXMgKGZvciBuZXh0IGdlbmVyYXRpb24pXHJcbiAgICBjb25zdCB1bmlxdWVTcGVjaWVzID0gWy4uLm5ldyBTZXQodGhpcy5wb3B1bGF0aW9uLm1hcChwID0+IHAuc3BlY2llcykpXTtcclxuXHJcbiAgICBmb3IgKGxldCBpID0gMCwgbGVuID0gdW5pcXVlU3BlY2llcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xyXG4gICAgICBjb25zdCBjYW5kaWRhdGVzID0gdGhpcy5zcGVjaWVzRGljdFt1bmlxdWVTcGVjaWVzW2ldXS5vcmdhbmlzbXM7XHJcbiAgICAgIGNvbnN0IHJlcHJlc2VudGF0aXZlID0gY2FuZGlkYXRlc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBjYW5kaWRhdGVzLmxlbmd0aCldLmNsb25lKCk7XHJcblxyXG4gICAgICB0aGlzLnNwZWNpZXNEaWN0W3VuaXF1ZVNwZWNpZXNbaV1dLnJlcHJlc2VudGF0aXZlID0gcmVwcmVzZW50YXRpdmU7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gc29ydCBzcGVjaWVzJyBvcmdhbmlzbXMsIGRyb3AgYm90dG9tIGhhbGYgcGVyIHNwZWNpZXMsIGFkanVzdCBmaXRuZXNzIGFuZCBkZWNsYXJlIGNoYW1waW9uXHJcbiAgICAvLyBjYWxjdWxhdGUgdG90YWwgZml0bmVzcyBzdW1cclxuICAgIGxldCB0b3RhbEZpdG5lc3NTdW0gPSAwLjA7XHJcblxyXG4gICAgZm9yIChsZXQga2V5IGluIHRoaXMuc3BlY2llc0RpY3QpIHtcclxuICAgICAgY29uc3Qgc3BlY2llcyA9IHRoaXMuc3BlY2llc0RpY3Rba2V5XTtcclxuXHJcbiAgICAgIHNwZWNpZXMuc29ydE9yZ2FuaXNtcygpO1xyXG4gICAgICBzcGVjaWVzLmN1bGwoKTtcclxuICAgICAgc3BlY2llcy5hZGp1c3RGaXRuZXNzKCk7XHJcbiAgICAgIHNwZWNpZXMuY2FsY3VsYXRlRml0bmVzc1N1bSgpO1xyXG4gICAgICBzcGVjaWVzLmdldENoYW1waW9uKCk7XHJcbiAgICAgIHRvdGFsRml0bmVzc1N1bSArPSBzcGVjaWVzLmZpdG5lc3NTdW07XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRGVjaWRlIGhvdyBtYW55IG9mZiBzcHJpbmdzIHdlIG5lZWQgcGVyIHNwZWNpZXMgKGJhc2VkIG9uIGZpdG5lc3Mgc3VtIGRpc3RyaWJ1dGlvbilcclxuICAgIC8vIGUuZy4gMTAwIG9mZiBzcHJpbmdzIGluIHNwZWNpZXMgMlxyXG4gICAgLy8gMjUlIGNyZWF0ZWQgYnkgY2xvbmluZ1xyXG4gICAgLy8gNzUlIGNyZWF0ZWQgYnkgY3Jvc3NvdmVyXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgIGZvciAobGV0IGtleSBpbiB0aGlzLnNwZWNpZXNEaWN0KSB7XHJcbiAgICAgIGNvbnN0IHNwZWNpZXMgPSB0aGlzLnNwZWNpZXNEaWN0W2tleV07XHJcblxyXG4gICAgICBzcGVjaWVzLm51bU9mZnNwcmluZ3MgPSBNYXRoLmZsb29yKChzcGVjaWVzLmZpdG5lc3NTdW0gLyB0b3RhbEZpdG5lc3NTdW0pICogdGhpcy5wb3B1bGF0aW9uLmxlbmd0aCk7XHJcblxyXG4gICAgICBpZiAoc3BlY2llcy5vcmdhbmlzbXMubGVuZ3RoIDwgMikge1xyXG4gICAgICAgIHNwZWNpZXMubnVtQ2xvbmluZyA9IHNwZWNpZXMubnVtT2Zmc3ByaW5ncztcclxuICAgICAgICBzcGVjaWVzLm51bUNyb3Nzb3ZlciA9IDA7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgc3BlY2llcy5udW1DbG9uaW5nID0gTWF0aC5mbG9vcigwLjI1ICogc3BlY2llcy5udW1PZmZzcHJpbmdzKTtcclxuICAgICAgICBzcGVjaWVzLm51bUNyb3Nzb3ZlciA9IHNwZWNpZXMubnVtT2Zmc3ByaW5ncyAtIHNwZWNpZXMubnVtQ2xvbmluZztcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIHJlcHJvZHVjZSBhbmQgYXNzaWduIG9mZnNwcmluZyB0byBuZXcgcG9wdWxhdGlvblxyXG4gICAgdGhpcy5wb3B1bGF0aW9uID0gW107XHJcbiAgICBmb3IgKGxldCBrZXkgaW4gdGhpcy5zcGVjaWVzRGljdCkge1xyXG4gICAgICBjb25zdCBzcGVjaWVzID0gdGhpcy5zcGVjaWVzRGljdFtrZXldO1xyXG5cclxuICAgICAgaWYgKHNwZWNpZXMubnVtT2Zmc3ByaW5ncyA+IDApIHtcclxuICAgICAgICBzcGVjaWVzLnJlcHJvZHVjZSgpO1xyXG4gICAgICAgIHRoaXMucG9wdWxhdGlvbiA9IHRoaXMucG9wdWxhdGlvbi5jb25jYXQoc3BlY2llcy5vZmZzcHJpbmdzKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIGZpbGwgdXAgdGhlIHJlbWFpbmluZyBzcG90cyAoZHVlIHRvIHJvdW5kaW5nIGVycm9ycykgd2l0aCBuZXcgcGxheWVyc1xyXG4gICAgaWYgKHRoaXMucG9wdWxhdGlvbi5sZW5ndGggPCB0aGlzLnBvcHVsYXRpb25TaXplKSB7XHJcbiAgICAgIGxldCByZXByZXNlbnRhdGl2ZSA9IG5ldyBQbGF5ZXIodGhpcy5nZW5lcmF0aW9uLCB0aGlzLm51bUlucHV0cywgdGhpcy5udW1PdXRwdXRzLCB0aGlzLmFjdGl2YXRpb24pO1xyXG5cclxuICAgICAgcmVwcmVzZW50YXRpdmUuaW5pdGlhbGl6ZSgpO1xyXG4gICAgICBjb25zdCBuZXdTcGVjaWVzSWQgPSBNYXRoLm1heCguLi5PYmplY3Qua2V5cyh0aGlzLnNwZWNpZXNEaWN0KS5tYXAoaWQgPT4gK2lkKSkgKyAxO1xyXG5cclxuICAgICAgdGhpcy5zcGVjaWVzRGljdFtuZXdTcGVjaWVzSWRdID0gbmV3IFNwZWNpZXMobmV3U3BlY2llc0lkLCByZXByZXNlbnRhdGl2ZS5jbG9uZSgpKTtcclxuICAgICAgdGhpcy5zcGVjaWVzRGljdFtuZXdTcGVjaWVzSWRdLmFzc2lnblRvU3BlY2llcyhyZXByZXNlbnRhdGl2ZSk7XHJcbiAgICAgIHRoaXMucG9wdWxhdGlvbi5wdXNoKHJlcHJlc2VudGF0aXZlKTtcclxuXHJcbiAgICAgIHdoaWxlICh0aGlzLnBvcHVsYXRpb24ubGVuZ3RoIDwgdGhpcy5wb3B1bGF0aW9uU2l6ZSkge1xyXG4gICAgICAgIGxldCBuZXdQbGF5ZXIgPSBuZXcgUGxheWVyKHRoaXMuZ2VuZXJhdGlvbiwgdGhpcy5udW1JbnB1dHMsIHRoaXMubnVtT3V0cHV0cywgdGhpcy5hY3RpdmF0aW9uKTtcclxuXHJcbiAgICAgICAgbmV3UGxheWVyLmluaXRpYWxpemUoKTtcclxuICAgICAgICB0aGlzLnNwZWNpZXNEaWN0W25ld1NwZWNpZXNJZF0uYXNzaWduVG9TcGVjaWVzKG5ld1BsYXllcik7XHJcbiAgICAgICAgdGhpcy5wb3B1bGF0aW9uLnB1c2gobmV3UGxheWVyKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB0aGlzLnBvcHVsYXRpb247XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IHtcclxuICBCSUFTOiAnYmlhcycsXHJcbiAgSU5QVVQ6ICdpbnB1dCcsXHJcbiAgT1VUUFVUOiAnb3V0cHV0JyxcclxuICBISURERU46ICdoaWRkZW4nXHJcbn07XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIE5vZGUge1xyXG4gIGNvbnN0cnVjdG9yKGlkLCB0eXBlLCBvdXRwdXRWYWx1ZSA9IDAuMCkge1xyXG4gICAgdGhpcy5pZCA9IGlkO1xyXG4gICAgdGhpcy50eXBlID0gdHlwZTtcclxuICAgIHRoaXMub3V0cHV0VmFsdWUgPSBvdXRwdXRWYWx1ZTtcclxuICB9XHJcblxyXG4gIGNsb25lKCkge1xyXG4gICAgcmV0dXJuIG5ldyBOb2RlKHRoaXMuaWQsIHRoaXMudHlwZSwgdGhpcy5vdXRwdXRWYWx1ZSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IENPTkZJRyB9IGZyb20gJy4vY29uZmlnLmpzJztcclxuaW1wb3J0IHsgcmFuZG9tRG91YmxlRnJvbUludGVydmFsIH0gZnJvbSAnLi91dGlscy5qcyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDb25uZWN0aW9uIHtcclxuICBjb25zdHJ1Y3RvcihzdGFydCwgZW5kLCB3ZWlnaHQsIGVuYWJsZWQsIGlubm92YXRpb24pIHtcclxuICAgIHRoaXMuc3RhcnQgPSBzdGFydDtcclxuICAgIHRoaXMuZW5kID0gZW5kO1xyXG4gICAgdGhpcy53ZWlnaHQgPSB3ZWlnaHQ7XHJcbiAgICB0aGlzLmVuYWJsZWQgPSBlbmFibGVkO1xyXG4gICAgdGhpcy5pbm5vdmF0aW9uID0gaW5ub3ZhdGlvbjtcclxuICB9XHJcblxyXG4gIGFkanVzdFdlaWdodCgpIHtcclxuICAgIHRoaXMud2VpZ2h0ICs9IHJhbmRvbURvdWJsZUZyb21JbnRlcnZhbChcclxuICAgICAgdGhpcy53ZWlnaHQgKiBDT05GSUcuQURKVVNUX1dFSUdIVF9GQUNUT1IsXHJcbiAgICAgIC10aGlzLndlaWdodCAqIENPTkZJRy5BREpVU1RfV0VJR0hUX0ZBQ1RPUlxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIHJlYXNzaWduV2VpZ2h0KCkge1xyXG4gICAgdGhpcy53ZWlnaHQgPSByYW5kb21Eb3VibGVGcm9tSW50ZXJ2YWwoQ09ORklHLk5FV19XRUlHSFRfUkFOR0UsIC1DT05GSUcuTkVXX1dFSUdIVF9SQU5HRSk7XHJcbiAgfVxyXG5cclxuICBjbG9uZSgpIHtcclxuICAgIHJldHVybiBuZXcgQ29ubmVjdGlvbih0aGlzLnN0YXJ0LCB0aGlzLmVuZCwgdGhpcy53ZWlnaHQsIHRoaXMuZW5hYmxlZCwgdGhpcy5pbm5vdmF0aW9uKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgQ09ORklHIH0gZnJvbSAnLi9jb25maWcuanMnO1xyXG5pbXBvcnQgUGxheWVyIGZyb20gJy4vcGxheWVyLmpzJztcclxuaW1wb3J0IEdlbm9tZSBmcm9tICcuL2dlbm9tZS5qcyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTcGVjaWVzIHtcclxuICBjb25zdHJ1Y3RvcihpZCwgcmVwcmVzZW50YXRpdmUpIHtcclxuICAgIHRoaXMuaWQgPSBpZDtcclxuICAgIHRoaXMucmVwcmVzZW50YXRpdmUgPSByZXByZXNlbnRhdGl2ZTtcclxuICAgIHRoaXMuZml0bmVzc1N1bSA9IDAuMDtcclxuICAgIHRoaXMub3JnYW5pc21zID0gW107XHJcbiAgICB0aGlzLm51bU9mZnNwcmluZ3MgPSAwO1xyXG4gICAgdGhpcy5udW1DbG9uaW5nID0gMDtcclxuICAgIHRoaXMubnVtQ3Jvc3NvdmVyID0gMDtcclxuICAgIHRoaXMub2Zmc3ByaW5ncyA9IFtdO1xyXG4gICAgdGhpcy5jaGFtcGlvbiA9IHt9O1xyXG4gICAgdGhpcy5udW1TdGFnbmF0ZWQgPSAwO1xyXG4gIH1cclxuXHJcbiAgaXNTdGFnbmF0ZWQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5udW1TdGFnbmF0ZWQgPiAxNDtcclxuICB9XHJcblxyXG4gIGRyb3BPcmdhbmlzbXMoKSB7XHJcbiAgICB0aGlzLm9yZ2FuaXNtcyA9IFtdO1xyXG4gICAgdGhpcy5vZmZzcHJpbmdzID0gW107XHJcbiAgICB0aGlzLmZpdG5lc3NTdW0gPSAwLjA7XHJcbiAgICB0aGlzLm51bU9mZnNwcmluZ3MgPSAwO1xyXG4gICAgdGhpcy5udW1DbG9uaW5nID0gMDtcclxuICAgIHRoaXMubnVtQ3Jvc3NvdmVyID0gMDtcclxuICB9XHJcblxyXG4gIGFzc2lnblRvU3BlY2llcyhwbGF5ZXIpIHtcclxuICAgIHBsYXllci5zcGVjaWVzID0gdGhpcy5pZDtcclxuICAgIHRoaXMub3JnYW5pc21zLnB1c2gocGxheWVyKTtcclxuICB9XHJcblxyXG4gIGFkanVzdEZpdG5lc3MoKSB7XHJcbiAgICBmb3IgKGxldCBpID0gMCwgbGVuID0gdGhpcy5vcmdhbmlzbXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcclxuICAgICAgdGhpcy5vcmdhbmlzbXNbaV0uZml0bmVzcyAvPSB0aGlzLm9yZ2FuaXNtcy5sZW5ndGg7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjYWxjdWxhdGVGaXRuZXNzU3VtKCkge1xyXG4gICAgdGhpcy5maXRuZXNzU3VtID0gMC4wO1xyXG4gICAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IHRoaXMub3JnYW5pc21zLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XHJcbiAgICAgIHRoaXMuZml0bmVzc1N1bSArPSB0aGlzLm9yZ2FuaXNtc1tpXS5maXRuZXNzO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZ2V0Q2hhbXBpb24oKSB7XHJcbiAgICBpZiAodGhpcy5jaGFtcGlvbiAmJiBNYXRoLmFicyh0aGlzLmNoYW1waW9uLmZpdG5lc3MgLSB0aGlzLm9yZ2FuaXNtc1swXS5maXRuZXNzKSA8IENPTkZJRy5TVEFHTkFUSU9OX1RIUkVTSE9MRCkge1xyXG4gICAgICB0aGlzLm51bVN0YWduYXRlZCsrO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5udW1TdGFnbmF0ZWQgPSAwO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuY2hhbXBpb24gPSB0aGlzLm9yZ2FuaXNtc1swXTtcclxuICB9XHJcblxyXG4gIGlzQ29tcGF0aWJsZVdpdGgocGxheWVyKSB7XHJcbiAgICBsZXQgbnVtRGlzam9pbnRHZW5lcyA9IDA7XHJcbiAgICBsZXQgbnVtRXhjZXNzR2VuZXMgPSAwO1xyXG4gICAgbGV0IG51bU1hdGNoaW5nR2VuZXMgPSAwO1xyXG4gICAgbGV0IHN1bVdlaWdodERpZmZlcmVuY2VNYXRjaGluZ0dlbmVzID0gMC4wO1xyXG5cclxuICAgIGxldCByZXByZXNlbnRhdGl2ZUhpZ2hlc3RJbm5vdmF0aW9uID0gdGhpcy5yZXByZXNlbnRhdGl2ZS5icmFpbi5jb25uZWN0aW9uc1tcclxuICAgICAgdGhpcy5yZXByZXNlbnRhdGl2ZS5icmFpbi5jb25uZWN0aW9ucy5sZW5ndGggLSAxXHJcbiAgICBdLmlubm92YXRpb247XHJcbiAgICBsZXQgcGxheWVySGlnaGVzdElubm92YXRpb24gPSBwbGF5ZXIuYnJhaW4uY29ubmVjdGlvbnNbcGxheWVyLmJyYWluLmNvbm5lY3Rpb25zLmxlbmd0aCAtIDFdLmlubm92YXRpb247XHJcblxyXG4gICAgY29uc3QgaW5ub3ZhdGlvblNldCA9IFtcclxuICAgICAgLi4ubmV3IFNldChbXHJcbiAgICAgICAgLi4udGhpcy5yZXByZXNlbnRhdGl2ZS5icmFpbi5jb25uZWN0aW9ucy5tYXAoYyA9PiBjLmlubm92YXRpb24pLFxyXG4gICAgICAgIC4uLnBsYXllci5icmFpbi5jb25uZWN0aW9ucy5tYXAoYyA9PiBjLmlubm92YXRpb24pXHJcbiAgICAgIF0pXHJcbiAgICBdO1xyXG5cclxuICAgIGZvciAobGV0IGkgPSAwLCBsZW4gPSBpbm5vdmF0aW9uU2V0Lmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XHJcbiAgICAgIGlmIChcclxuICAgICAgICB0aGlzLnJlcHJlc2VudGF0aXZlLmJyYWluLmNvbm5lY3Rpb25zLnNvbWUoYyA9PiBjLmlubm92YXRpb24gPT09IGlubm92YXRpb25TZXRbaV0pICYmXHJcbiAgICAgICAgcGxheWVyLmJyYWluLmNvbm5lY3Rpb25zLnNvbWUoYyA9PiBjLmlubm92YXRpb24gPT09IGlubm92YXRpb25TZXRbaV0pXHJcbiAgICAgICkge1xyXG4gICAgICAgIHN1bVdlaWdodERpZmZlcmVuY2VNYXRjaGluZ0dlbmVzICs9IE1hdGguYWJzKFxyXG4gICAgICAgICAgdGhpcy5yZXByZXNlbnRhdGl2ZS5icmFpbi5jb25uZWN0aW9ucy5maW5kKGMgPT4gYy5pbm5vdmF0aW9uID09PSBpbm5vdmF0aW9uU2V0W2ldKS53ZWlnaHQgLVxyXG4gICAgICAgICAgICBwbGF5ZXIuYnJhaW4uY29ubmVjdGlvbnMuZmluZChjID0+IGMuaW5ub3ZhdGlvbiA9PT0gaW5ub3ZhdGlvblNldFtpXSkud2VpZ2h0XHJcbiAgICAgICAgKTtcclxuICAgICAgICBudW1NYXRjaGluZ0dlbmVzKys7XHJcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5yZXByZXNlbnRhdGl2ZS5icmFpbi5jb25uZWN0aW9ucy5zb21lKGMgPT4gYy5pbm5vdmF0aW9uID09PSBpbm5vdmF0aW9uU2V0W2ldKSkge1xyXG4gICAgICAgIGlmIChpbm5vdmF0aW9uU2V0W2ldIDwgcGxheWVySGlnaGVzdElubm92YXRpb24pIHtcclxuICAgICAgICAgIG51bURpc2pvaW50R2VuZXMrKztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgbnVtRXhjZXNzR2VuZXMrKztcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKGlubm92YXRpb25TZXRbaV0gPCByZXByZXNlbnRhdGl2ZUhpZ2hlc3RJbm5vdmF0aW9uKSB7XHJcbiAgICAgICAgICBudW1EaXNqb2ludEdlbmVzKys7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIG51bUV4Y2Vzc0dlbmVzKys7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgYXZnV2VpZ2h0RGlmZmVyZW5jZU1hdGNoaW5nR2VuZXMgPVxyXG4gICAgICBudW1NYXRjaGluZ0dlbmVzID4gMCA/IHN1bVdlaWdodERpZmZlcmVuY2VNYXRjaGluZ0dlbmVzIC8gbnVtTWF0Y2hpbmdHZW5lcyA6IDAuMDtcclxuICAgIGNvbnN0IE4gPSBNYXRoLm1heChcclxuICAgICAgdGhpcy5yZXByZXNlbnRhdGl2ZS5icmFpbi5ub2Rlcy5sZW5ndGggKyB0aGlzLnJlcHJlc2VudGF0aXZlLmJyYWluLmNvbm5lY3Rpb25zLmxlbmd0aCxcclxuICAgICAgcGxheWVyLmJyYWluLm5vZGVzLmxlbmd0aCArIHBsYXllci5icmFpbi5jb25uZWN0aW9ucy5sZW5ndGhcclxuICAgICk7XHJcblxyXG4gICAgcmV0dXJuIChcclxuICAgICAgKENPTkZJRy5DMSAqIG51bUV4Y2Vzc0dlbmVzKSAvIE4gK1xyXG4gICAgICAgIChDT05GSUcuQzIgKiBudW1EaXNqb2ludEdlbmVzKSAvIE4gK1xyXG4gICAgICAgIENPTkZJRy5DMyAqIGF2Z1dlaWdodERpZmZlcmVuY2VNYXRjaGluZ0dlbmVzIDxcclxuICAgICAgQ09ORklHLkNPTVBBQklMSVRZX1RIUkVTSE9MRFxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIHNvcnRPcmdhbmlzbXMoKSB7XHJcbiAgICB0aGlzLm9yZ2FuaXNtcy5zb3J0KChhLCBiKSA9PiBiLmZpdG5lc3MgLSBhLmZpdG5lc3MpO1xyXG4gIH1cclxuXHJcbiAgY3VsbCgpIHtcclxuICAgIC8vIGRvbnQgaGFsZiBwb3B1bGF0aW9uIG90aGVyd2lzZSB3ZSB3b250IGhhdmUgdHdvIHBhcmVudHNcclxuICAgIGlmICh0aGlzLm9yZ2FuaXNtcy5sZW5ndGggPCA0KSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmNhbGN1bGF0ZUZpdG5lc3NTdW0oKTtcclxuXHJcbiAgICBsZXQgc3Vydml2b3JzID0gW107XHJcbiAgICBsZXQgbnVtVXBwZXJIYWxmID0gTWF0aC5mbG9vcih0aGlzLm9yZ2FuaXNtcy5sZW5ndGggLyAyLjApO1xyXG5cclxuICAgIHdoaWxlIChzdXJ2aXZvcnMubGVuZ3RoIDwgbnVtVXBwZXJIYWxmKSB7XHJcbiAgICAgIGxldCB0aHJlc2hvbGQgPSBNYXRoLnJhbmRvbSgpICogdGhpcy5maXRuZXNzU3VtO1xyXG4gICAgICBsZXQgc3VtID0gMC4wO1xyXG5cclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm9yZ2FuaXNtcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIHN1bSArPSB0aGlzLm9yZ2FuaXNtc1tpXS5maXRuZXNzO1xyXG5cclxuICAgICAgICBpZiAoc3VtID49IHRocmVzaG9sZCkge1xyXG4gICAgICAgICAgbGV0IHN1cnZpdm9yID0gdGhpcy5vcmdhbmlzbXMuc3BsaWNlKGksIDEpWzBdO1xyXG5cclxuICAgICAgICAgIHN1cnZpdm9ycy5wdXNoKHN1cnZpdm9yKTtcclxuICAgICAgICAgIHRoaXMuZml0bmVzc1N1bSAtPSBzdXJ2aXZvci5maXRuZXNzO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5vcmdhbmlzbXMgPSBzdXJ2aXZvcnM7XHJcbiAgfVxyXG5cclxuICByZXByb2R1Y2UoKSB7XHJcbiAgICAvLyBjb3B5IGNoYW1waW9uIHVuY2hhbmdlZFxyXG4gICAgbGV0IGNoYW1waW9uQ2xvbmUgPSB0aGlzLmNoYW1waW9uLmNsb25lKCk7XHJcblxyXG4gICAgY2hhbXBpb25DbG9uZS5nZW5lcmF0aW9uICs9IDE7XHJcbiAgICB0aGlzLm9mZnNwcmluZ3MucHVzaChjaGFtcGlvbkNsb25lKTtcclxuICAgIGlmICh0aGlzLm51bUNsb25pbmcgPiAwKSB7XHJcbiAgICAgIHRoaXMubnVtQ2xvbmluZy0tO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5udW1Dcm9zc292ZXItLTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBjbG9uZSAyNSUgYXNleHVhbFxyXG4gICAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IHRoaXMubnVtQ2xvbmluZzsgaSA8IGxlbjsgaSsrKSB7XHJcbiAgICAgIGxldCB0aHJlc2hvbGQgPSBNYXRoLnJhbmRvbSgpICogdGhpcy5maXRuZXNzU3VtO1xyXG4gICAgICBsZXQgc3VtID0gMC4wO1xyXG5cclxuICAgICAgZm9yIChsZXQgaiA9IDAsIGxlbjIgPSB0aGlzLm9yZ2FuaXNtcy5sZW5ndGg7IGogPCBsZW4yOyBqKyspIHtcclxuICAgICAgICBzdW0gKz0gdGhpcy5vcmdhbmlzbXNbal0uZml0bmVzcztcclxuXHJcbiAgICAgICAgaWYgKHN1bSA+PSB0aHJlc2hvbGQpIHtcclxuICAgICAgICAgIGxldCBvZmZzcHJpbmcgPSB0aGlzLm11dGF0ZSh0aGlzLm9yZ2FuaXNtc1tqXSk7XHJcblxyXG4gICAgICAgICAgb2Zmc3ByaW5nLmdlbmVyYXRpb24rKztcclxuICAgICAgICAgIHRoaXMub2Zmc3ByaW5ncy5wdXNoKG9mZnNwcmluZyk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBjcm9zc292ZXIgNzUlXHJcbiAgICBmb3IgKGxldCBpID0gMCwgbGVuID0gdGhpcy5udW1Dcm9zc292ZXI7IGkgPCBsZW47IGkrKykge1xyXG4gICAgICBsZXQgdGhyZXNob2xkID0gTWF0aC5yYW5kb20oKSAqIHRoaXMuZml0bmVzc1N1bTtcclxuICAgICAgbGV0IHN1bSA9IDAuMDtcclxuICAgICAgbGV0IHBhcmVudDE7XHJcblxyXG4gICAgICBmb3IgKGxldCBqID0gMCwgbGVuMiA9IHRoaXMub3JnYW5pc21zLmxlbmd0aDsgaiA8IGxlbjI7IGorKykge1xyXG4gICAgICAgIHN1bSArPSB0aGlzLm9yZ2FuaXNtc1tqXS5maXRuZXNzO1xyXG5cclxuICAgICAgICBpZiAoc3VtID49IHRocmVzaG9sZCkge1xyXG4gICAgICAgICAgcGFyZW50MSA9IHRoaXMub3JnYW5pc21zW2pdO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICB0aHJlc2hvbGQgPSBNYXRoLnJhbmRvbSgpICogdGhpcy5maXRuZXNzU3VtO1xyXG4gICAgICBzdW0gPSAwLjA7XHJcbiAgICAgIGxldCBwYXJlbnQyO1xyXG5cclxuICAgICAgZG8ge1xyXG4gICAgICAgIGZvciAobGV0IGogPSAwLCBsZW4yID0gdGhpcy5vcmdhbmlzbXMubGVuZ3RoOyBqIDwgbGVuMjsgaisrKSB7XHJcbiAgICAgICAgICBzdW0gKz0gdGhpcy5vcmdhbmlzbXNbal0uZml0bmVzcztcclxuICAgICAgICAgIGlmIChzdW0gPj0gdGhyZXNob2xkKSB7XHJcbiAgICAgICAgICAgIHBhcmVudDIgPSB0aGlzLm9yZ2FuaXNtc1tqXTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRocmVzaG9sZCA9IE1hdGgucmFuZG9tKCkgKiB0aGlzLmZpdG5lc3NTdW07XHJcbiAgICAgICAgc3VtID0gMC4wO1xyXG4gICAgICB9IHdoaWxlIChwYXJlbnQxID09PSBwYXJlbnQyKTtcclxuXHJcbiAgICAgIGxldCBvZmZzcHJpbmcgPSB0aGlzLm11dGF0ZSh0aGlzLmNyb3Nzb3ZlcihwYXJlbnQxLCBwYXJlbnQyKSk7XHJcblxyXG4gICAgICB0aGlzLm9mZnNwcmluZ3MucHVzaChvZmZzcHJpbmcpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gRXZlcnkgdGltZSB3ZSBnZXQgYSBuZXcgb2ZmIHNwcmluZywgdGhlcmUgaXMgYSBjaGFuY2UgZm9yIG11dGF0aW9uXHJcbiAgLy8gYSkgODAlIHRoYXQgZXhpc3RpbmcgY29ubmVjdGlvbnMgZ2V0IG11dGF0ZWQgKDkwJSBhZGp1c3RlZCA8LT4gMTAlIG5ldyB2YWx1ZSlcclxuICAvLyBiKSAyNSUgdGhhdCBpbmhlcml0ZWQgZ2VuZSB3aGljaCB3YXMgZGlzYWJsZWQgYmVmb3JlaGFuZCAoaW4gYWxsIHBhcmVudHMpIGdldHMgZW5hYmxlZCBhZ2FpblxyXG4gIC8vIGMpIDMlIG5ldyBub2RlXHJcbiAgLy8gZCkgNSUgKG9yIDMwJSB3aGVuIGxhcmdlIHBvcHVsYXRpb24pIG5ldyBjb25uZWN0aW9uXHJcbiAgbXV0YXRlKHBhcmVudCkge1xyXG4gICAgbGV0IG9mZnNwcmluZyA9IHBhcmVudC5jbG9uZSgpO1xyXG5cclxuICAgIC8vIG11dGF0ZSBjb25uZWN0aW9uc1xyXG4gICAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IG9mZnNwcmluZy5icmFpbi5jb25uZWN0aW9ucy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xyXG4gICAgICBpZiAoTWF0aC5yYW5kb20oKSA8IENPTkZJRy5QRVJDRU5UQUdFX01VVEFUSU9OKSB7XHJcbiAgICAgICAgaWYgKE1hdGgucmFuZG9tKCkgPCBDT05GSUcuUEVSQ0VOVEFHRV9NVVRBVElPTl9BREpVU1RfV0VJR0hUKSB7XHJcbiAgICAgICAgICBvZmZzcHJpbmcuYnJhaW4uY29ubmVjdGlvbnNbaV0uYWRqdXN0V2VpZ2h0KCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIG9mZnNwcmluZy5icmFpbi5jb25uZWN0aW9uc1tpXS5yZWFzc2lnbldlaWdodCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGxldCBkaXNhYmxlZENvbmVuY3Rpb25zID0gb2Zmc3ByaW5nLmJyYWluLmNvbm5lY3Rpb25zLmZpbHRlcihjID0+IGMuZW5hYmxlZCA9PT0gZmFsc2UpO1xyXG5cclxuICAgIGZvciAobGV0IGkgPSAwLCBsZW4gPSBkaXNhYmxlZENvbmVuY3Rpb25zLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XHJcbiAgICAgIGlmIChNYXRoLnJhbmRvbSgpIDwgMC4yNSkge1xyXG4gICAgICAgIG9mZnNwcmluZy5icmFpbi5jb25uZWN0aW9uc1tpXS5lbmFibGVkID0gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmIChNYXRoLnJhbmRvbSgpIDwgQ09ORklHLlBFUkNFTlRBR0VfTkVXX05PREUpIHtcclxuICAgICAgb2Zmc3ByaW5nLmJyYWluLmFkZE5vZGUoKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoTWF0aC5yYW5kb20oKSA8IENPTkZJRy5QRVJDRU5UQUdFX05FV19DT05ORUNUSU9OKSB7XHJcbiAgICAgIG9mZnNwcmluZy5icmFpbi5hZGRDb25uZWN0aW9uKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIG9mZnNwcmluZztcclxuICB9XHJcblxyXG4gIGNyb3Nzb3ZlcihwYXJlbnQxLCBwYXJlbnQyKSB7XHJcbiAgICBsZXQgYnJhaW5PZmZzcHJpbmcgPSBuZXcgR2Vub21lKHBhcmVudDEubnVtSW5wdXRzLCBwYXJlbnQxLm51bU91dHB1dHMsIHBhcmVudDEuYWN0aXZhdGlvbik7XHJcblxyXG4gICAgY29uc3Qgbm9kZXNTZXQgPSBbLi4ubmV3IFNldChbLi4ucGFyZW50MS5icmFpbi5ub2Rlcy5tYXAobiA9PiBuLmlkKSwgLi4ucGFyZW50Mi5icmFpbi5ub2Rlcy5tYXAobiA9PiBuLmlkKV0pXTtcclxuXHJcbiAgICBmb3IgKGxldCBpID0gMCwgbGVuID0gbm9kZXNTZXQubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcclxuICAgICAgaWYgKHBhcmVudDEuYnJhaW4ubm9kZXMuc29tZShuID0+IG4uaWQgPT09IG5vZGVzU2V0W2ldKSAmJiBwYXJlbnQyLmJyYWluLm5vZGVzLnNvbWUobiA9PiBuLmlkID09PSBub2Rlc1NldFtpXSkpIHtcclxuICAgICAgICBpZiAoTWF0aC5yYW5kb20oKSA8IDAuNSkge1xyXG4gICAgICAgICAgYnJhaW5PZmZzcHJpbmcubm9kZXMucHVzaChwYXJlbnQxLmJyYWluLm5vZGVzLmZpbmQobiA9PiBuLmlkID09PSBub2Rlc1NldFtpXSkuY2xvbmUoKSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGJyYWluT2Zmc3ByaW5nLm5vZGVzLnB1c2gocGFyZW50Mi5icmFpbi5ub2Rlcy5maW5kKG4gPT4gbi5pZCA9PT0gbm9kZXNTZXRbaV0pLmNsb25lKCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGlubm92YXRpb25TZXQgPSBbXHJcbiAgICAgIC4uLm5ldyBTZXQoW1xyXG4gICAgICAgIC4uLnBhcmVudDEuYnJhaW4uY29ubmVjdGlvbnMubWFwKGMgPT4gYy5pbm5vdmF0aW9uKSxcclxuICAgICAgICAuLi5wYXJlbnQyLmJyYWluLmNvbm5lY3Rpb25zLm1hcChjID0+IGMuaW5ub3ZhdGlvbilcclxuICAgICAgXSlcclxuICAgIF07XHJcblxyXG4gICAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IGlubm92YXRpb25TZXQubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcclxuICAgICAgaWYgKFxyXG4gICAgICAgIHBhcmVudDEuYnJhaW4uY29ubmVjdGlvbnMuc29tZShjID0+IGMuaW5ub3ZhdGlvbiA9PT0gaW5ub3ZhdGlvblNldFtpXSkgJiZcclxuICAgICAgICBwYXJlbnQyLmJyYWluLmNvbm5lY3Rpb25zLnNvbWUoYyA9PiBjLmlubm92YXRpb24gPT09IGlubm92YXRpb25TZXRbaV0pXHJcbiAgICAgICkge1xyXG4gICAgICAgIGlmIChNYXRoLnJhbmRvbSgpIDwgMC41KSB7XHJcbiAgICAgICAgICBicmFpbk9mZnNwcmluZy5jb25uZWN0aW9ucy5wdXNoKFxyXG4gICAgICAgICAgICBwYXJlbnQxLmJyYWluLmNvbm5lY3Rpb25zLmZpbmQoYyA9PiBjLmlubm92YXRpb24gPT09IGlubm92YXRpb25TZXRbaV0pLmNsb25lKClcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGJyYWluT2Zmc3ByaW5nLmNvbm5lY3Rpb25zLnB1c2goXHJcbiAgICAgICAgICAgIHBhcmVudDIuYnJhaW4uY29ubmVjdGlvbnMuZmluZChjID0+IGMuaW5ub3ZhdGlvbiA9PT0gaW5ub3ZhdGlvblNldFtpXSkuY2xvbmUoKVxyXG4gICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gZGlzam9pbnQgYW5kIGV4Y2VzcyBub2Rlc1xyXG4gICAgICAgIGlmIChwYXJlbnQxLmJyYWluLmNvbm5lY3Rpb25zLnNvbWUoYyA9PiBjLmlubm92YXRpb24gPT09IGlubm92YXRpb25TZXRbaV0pKSB7XHJcbiAgICAgICAgICBpZiAocGFyZW50MS5maXRuZXNzID49IHBhcmVudDIuZml0bmVzcykge1xyXG4gICAgICAgICAgICBicmFpbk9mZnNwcmluZy5jb25uZWN0aW9ucy5wdXNoKFxyXG4gICAgICAgICAgICAgIHBhcmVudDEuYnJhaW4uY29ubmVjdGlvbnMuZmluZChjID0+IGMuaW5ub3ZhdGlvbiA9PT0gaW5ub3ZhdGlvblNldFtpXSkuY2xvbmUoKVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBpZiAocGFyZW50Mi5maXRuZXNzID49IHBhcmVudDEuZml0bmVzcykge1xyXG4gICAgICAgICAgICBicmFpbk9mZnNwcmluZy5jb25uZWN0aW9ucy5wdXNoKFxyXG4gICAgICAgICAgICAgIHBhcmVudDIuYnJhaW4uY29ubmVjdGlvbnMuZmluZChjID0+IGMuaW5ub3ZhdGlvbiA9PT0gaW5ub3ZhdGlvblNldFtpXSkuY2xvbmUoKVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIG9ubHkgY2xvbmUgbm9kZXMgd2hlcmUgd2UgaGF2ZSByZWZlcmVuY2VzIHRvXHJcbiAgICBjb25zdCBuZWVkZWROb2Rlc1NldCA9IFtcclxuICAgICAgLi4ubmV3IFNldChbLi4uYnJhaW5PZmZzcHJpbmcuY29ubmVjdGlvbnMubWFwKGMgPT4gYy5zdGFydCksIC4uLmJyYWluT2Zmc3ByaW5nLmNvbm5lY3Rpb25zLm1hcChjID0+IGMuZW5kKV0pXHJcbiAgICBdO1xyXG5cclxuICAgIGZvciAobGV0IGkgPSAwLCBsZW4gPSBuZWVkZWROb2Rlc1NldC5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xyXG4gICAgICBpZiAoIWJyYWluT2Zmc3ByaW5nLm5vZGVzLmZpbmQobiA9PiBuLmlkID09PSBuZWVkZWROb2Rlc1NldFtpXSkpIHtcclxuICAgICAgICBpZiAocGFyZW50MS5icmFpbi5ub2Rlcy5zb21lKG4gPT4gbi5pZCA9PT0gbmVlZGVkTm9kZXNTZXRbaV0pKSB7XHJcbiAgICAgICAgICBicmFpbk9mZnNwcmluZy5ub2Rlcy5wdXNoKHBhcmVudDEuYnJhaW4ubm9kZXMuZmluZChuID0+IG4uaWQgPT09IG5lZWRlZE5vZGVzU2V0W2ldKS5jbG9uZSgpKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgYnJhaW5PZmZzcHJpbmcubm9kZXMucHVzaChwYXJlbnQyLmJyYWluLm5vZGVzLmZpbmQobiA9PiBuLmlkID09PSBuZWVkZWROb2Rlc1NldFtpXSkuY2xvbmUoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IG9mZnNwcmluZyA9IG5ldyBQbGF5ZXIoXHJcbiAgICAgIHBhcmVudDEuZ2VuZXJhdGlvbiArIDEsXHJcbiAgICAgIHBhcmVudDEubnVtSW5wdXRzLFxyXG4gICAgICBwYXJlbnQxLm51bU91dHB1dHMsXHJcbiAgICAgIHBhcmVudDEuYWN0aXZhdGlvbixcclxuICAgICAgYnJhaW5PZmZzcHJpbmcsXHJcbiAgICAgIHBhcmVudDEuc3BlY2llc1xyXG4gICAgKTtcclxuXHJcbiAgICByZXR1cm4gb2Zmc3ByaW5nO1xyXG4gIH1cclxufVxyXG4iXSwic291cmNlUm9vdCI6IiJ9